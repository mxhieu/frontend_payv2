{"ast":null,"code":"import _classCallCheck from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{withRouter,Redirect}from'react-router-dom';import loginAction from\"../actions/login.actions\";import{connect}from\"react-redux\";var AppleLoginCallback=/*#__PURE__*/function(_Component){_inherits(AppleLoginCallback,_Component);function AppleLoginCallback(){var _getPrototypeOf2;var _this;_classCallCheck(this,AppleLoginCallback);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(AppleLoginCallback)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.parseJwt=function(token){var base64Url=token.split('.')[1];var base64=base64Url.replace(/-/g,'+').replace(/_/g,'/');var jsonPayload=decodeURIComponent(atob(base64).split('').map(function(c){return'%'+('00'+c.charCodeAt(0).toString(16)).slice(-2);}).join(''));return JSON.parse(jsonPayload);};return _this;}_createClass(AppleLoginCallback,[{key:\"componentDidMount\",value:function componentDidMount(){var queryString=require('query-string');var strParams=this.props.location.hash;var params=queryString.parse(strParams);if(this.props.login.isLogged===false&&params.id_token!==undefined){var tokenData=this.parseJwt(params.id_token);this.props.appleSignIn(tokenData.sub);}}},{key:\"render\",value:function render(){return React.createElement(Redirect,{to:\"/\"});}}]);return AppleLoginCallback;}(Component);var mapStateToProps=function mapStateToProps(state){return{login:state.loginReducer};};var mapDispatchToProps=function mapDispatchToProps(dispatch,props){return{appleSignIn:function appleSignIn(sub){dispatch(loginAction.LoginApple(sub));}};};export default connect(mapStateToProps,mapDispatchToProps)(withRouter(AppleLoginCallback));","map":{"version":3,"sources":["C:/reactjs/payv2/pay-v2.phoeniz.com/src/components/AppleLoginCallback.js"],"names":["React","Component","withRouter","Redirect","loginAction","connect","AppleLoginCallback","parseJwt","token","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","queryString","require","strParams","props","location","hash","params","login","isLogged","id_token","undefined","tokenData","appleSignIn","sub","mapStateToProps","state","loginReducer","mapDispatchToProps","dispatch","LoginApple"],"mappings":"0nBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,UAAT,CAAqBC,QAArB,KAAqC,kBAArC,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CACA,OAASC,OAAT,KAAwB,aAAxB,C,GAEMC,CAAAA,kB,+aAEFC,Q,CAAW,SAACC,KAAD,CAAW,CAClB,GAAIC,CAAAA,SAAS,CAAGD,KAAK,CAACE,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAhB,CACA,GAAIC,CAAAA,MAAM,CAAGF,SAAS,CAACG,OAAV,CAAkB,IAAlB,CAAwB,GAAxB,EAA6BA,OAA7B,CAAqC,IAArC,CAA2C,GAA3C,CAAb,CACA,GAAIC,CAAAA,WAAW,CAAGC,kBAAkB,CAACC,IAAI,CAACJ,MAAD,CAAJ,CAAaD,KAAb,CAAmB,EAAnB,EAAuBM,GAAvB,CAA2B,SAASC,CAAT,CAAY,CACxE,MAAO,IAAM,CAAC,KAAOA,CAAC,CAACC,UAAF,CAAa,CAAb,EAAgBC,QAAhB,CAAyB,EAAzB,CAAR,EAAsCC,KAAtC,CAA4C,CAAC,CAA7C,CAAb,CACH,CAFoC,EAElCC,IAFkC,CAE7B,EAF6B,CAAD,CAApC,CAIA,MAAOC,CAAAA,IAAI,CAACC,KAAL,CAAWV,WAAX,CAAP,CACH,C,2GAEkB,CACf,GAAIW,CAAAA,WAAW,CAAGC,OAAO,CAAC,cAAD,CAAzB,CACA,GAAIC,CAAAA,SAAS,CAAG,KAAKC,KAAL,CAAWC,QAAX,CAAoBC,IAApC,CACA,GAAIC,CAAAA,MAAM,CAAGN,WAAW,CAACD,KAAZ,CAAkBG,SAAlB,CAAb,CACA,GAAI,KAAKC,KAAL,CAAWI,KAAX,CAAiBC,QAAjB,GAA8B,KAA9B,EAAuCF,MAAM,CAACG,QAAP,GAAoBC,SAA/D,CAAyE,CACrE,GAAIC,CAAAA,SAAS,CAAG,KAAK5B,QAAL,CAAcuB,MAAM,CAACG,QAArB,CAAhB,CACA,KAAKN,KAAL,CAAWS,WAAX,CAAuBD,SAAS,CAACE,GAAjC,EACH,CACJ,C,uCAEQ,CACL,MAAO,qBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACH,C,gCAxB4BpC,S,EA2BjC,GAAMqC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAC,KAAK,CAAI,CAC7B,MAAO,CACLR,KAAK,CAAEQ,KAAK,CAACC,YADR,CAAP,CAGH,CAJD,CAMA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,CAAWf,KAAX,CAAqB,CAC5C,MAAO,CACHS,WAAW,CAAE,qBAACC,GAAD,CAAS,CAClBK,QAAQ,CAACtC,WAAW,CAACuC,UAAZ,CAAuBN,GAAvB,CAAD,CAAR,CACH,CAHE,CAAP,CAKH,CAND,CAQA,cAAehC,CAAAA,OAAO,CAClBiC,eADkB,CAElBG,kBAFkB,CAAP,CAGbvC,UAAU,CAACI,kBAAD,CAHG,CAAf","sourcesContent":["import React, { Component } from 'react'\r\nimport { withRouter, Redirect } from 'react-router-dom';\r\nimport loginAction from \"../actions/login.actions\"\r\nimport { connect } from \"react-redux\";  \r\n\r\nclass AppleLoginCallback extends Component {\r\n\r\n    parseJwt = (token) => {\r\n        var base64Url = token.split('.')[1];\r\n        var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n        var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {\r\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n        }).join(''));\r\n    \r\n        return JSON.parse(jsonPayload);\r\n    };\r\n\r\n    componentDidMount(){\r\n        let queryString = require('query-string');\r\n        let strParams = this.props.location.hash;\r\n        let params = queryString.parse(strParams);\r\n        if (this.props.login.isLogged === false && params.id_token !== undefined){\r\n            let tokenData = this.parseJwt(params.id_token)        \r\n            this.props.appleSignIn(tokenData.sub)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <Redirect to=\"/\" />\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n      login: state.loginReducer,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, props) => {\r\n    return {\r\n        appleSignIn: (sub) => {\r\n            dispatch(loginAction.LoginApple(sub))\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withRouter(AppleLoginCallback))"]},"metadata":{},"sourceType":"module"}