{"ast":null,"code":"import _defineProperty from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{connect}from'react-redux';import\"../assets/css/paytogame.css\";import gameActions from\"../actions/games.actions\";import paymentActions from\"../actions/payment.actions\";import{withRouter}from'react-router-dom';import*as _ from'lodash';import Form from'react-validation/build/form';import Input from'react-validation/build/input';import Select from'react-validation/build/select';import CheckButton from'react-validation/build/button';import{required,minLength,maxLength}from\"../utils/validateInput\";var Paytogame=/*#__PURE__*/function(_Component){_inherits(Paytogame,_Component);function Paytogame(props){var _this;_classCallCheck(this,Paytogame);_this=_possibleConstructorReturn(this,_getPrototypeOf(Paytogame).call(this,props));_this.checkHasRole=function(){var errorSelectRole=[];if(_this.state.sltRoleId===''){errorSelectRole.push('không tìm thấy thông tin nhân vật');}_this.setState({errorSelectRole:errorSelectRole});return errorSelectRole;};_this.handlePayByCard=function(e){e.preventDefault();_this.formCardPay.validateAll();var errorRole=_this.checkHasRole();if(_this.checkBtn1.context._errors.length===0&&errorRole.length===0){_this.props.chargeCard(_this.state);}};_this.handlePayByATM=function(e){e.preventDefault();_this.formAtmPay.validateAll();var errorRole=_this.checkHasRole();if(_this.checkBtn2.context._errors.length===0&&errorRole.length===0){_this.props.chargeAtm(_this.state);}};_this.hanleGetRole=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var target,serverId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:target=event.target;serverId=target.value;if(!(serverId!=='')){_context.next=8;break;}_context.next=5;return _this.props.getUserRole(serverId,JSON.parse(localStorage.getItem('user')).data.id,_this.state.gameInfo.agent);case 5:if(_this.props.paymentReducer.userRole.data===undefined){_this.setState({errorSelectRole:['không tìm thấy thông tin nhân vật']});}_context.next=9;break;case 8:_this.setState({errorSelectRole:''});case 9:_this.setState({sltServer:serverId});case 10:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChange=function(event){var target=event.target;var value=target.type==='checkbox'?target.checked:target.value;var name=target.name;_this.setState(_defineProperty({},name,value));};_this.state={username:JSON.parse(localStorage.getItem('user')).data.username,userRole:{},sltRoleId:'',sltServer:'',sltCardType:'',txtSerie:'',txtCardPin:'',sltAmount:'',gameInfo:{},chargeSuccessMSG:'',errorsAtm:[],errorsCard:[],errorSelectServer:[],errorSelectRole:[]};return _this;}_createClass(Paytogame,[{key:\"componentDidMount\",value:function componentDidMount(){var match=this.props.match;this.props.getDetailGameToGame(match.params.id);var queryString=require('query-string');var strParams=this.props.location.search;var params=queryString.parse(strParams);if(_.has(params,'trans_id')){this.props.chargeAtmSuccess(strParams);console.log(this.props);if(this.props.paymentReducer.chargeAtmSuccess.messages!==null){var modalATMReport=window.$('.modal-atm-report');modalATMReport.modal('show');modalATMReport.on('click',function(){modalATMReport.modal('hide');});}}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps,previousState){if(Object.keys(previousState.gameInfo).length===0){var gameData=previousProps.gamesReducer.data;for(var key in gameData){if(gameData.hasOwnProperty(key)){if(gameData[key].slug===previousProps.match.params.slug){this.setState({gameInfo:gameData[key]});}}}}}},{key:\"render\",value:function render(){var _this2=this;// console.log(this.state)\nvar chargeAtmMSG='';if(this.props.paymentReducer.chargeAtmSuccess.data!==undefined){chargeAtmMSG=this.props.paymentReducer.chargeAtmSuccess.data.messages;}var server=this.props.gamesReducer.detail;var serverElement=null;if(server.length>0){serverElement=server.map(function(val,index){return React.createElement(\"option\",{key:index,value:val.server_id},val.server_name);});}var _this$state=this.state,errorSelectServer=_this$state.errorSelectServer,gameInfo=_this$state.gameInfo,userRole=_this$state.userRole,errorSelectRole=_this$state.errorSelectRole;var paymentReducer=this.props.paymentReducer;if(Object.keys(gameInfo).length===0||server.length===0){return React.createElement(\"div\",{style:{textAlign:\"center\"}},React.createElement(\"div\",{className:\"lds-dual-ring\"}));}else{return React.createElement(\"div\",{className:\"container paytogame_container\"},React.createElement(\"div\",{className:\"row box\"},React.createElement(\"h2\",null,gameInfo.name),React.createElement(\"div\",{className:\"hd-Form\"},\" B\\u01B0\\u1EDBc 1: Ch\\u1ECDn th\\xF4ng tin nh\\xE2n v\\u1EADt (*)\"),React.createElement(\"label\",{htmlFor:\"sltServer\",className:\"col-sm-12 controll-label\",id:\"list_server\"},\" Ch\\u1ECDn server:\"),errorSelectServer&&React.createElement(\"span\",{className:\"input-error\"},errorSelectServer[0]),React.createElement(\"select\",{name:\"sltServer\",value:this.state.sltServer,onChange:this.hanleGetRole,className:\"form-control \",id:\"server_list\"},React.createElement(\"option\",{value:\"\"},\"Ch\\u1ECDn server\"),serverElement),Object.keys(userRole).length>0?React.createElement(\"div\",null,React.createElement(\"label\",{htmlFor:\"sltRoleId\",className:\"col-sm-12 controll-label\"},\" Ch\\u1ECDn nh\\xE2n v\\u1EADt:\"),React.createElement(\"select\",{name:\"sltRoleId\",onChange:this.handleChange,className:\"form-control \",id:\"userRole\"},userRole.data.role.map(function(val,index){return React.createElement(\"option\",{key:index,value:val.roleId},val.roleName);}))):React.createElement(\"span\",{className:\"input-error\"},errorSelectRole[0]),React.createElement(\"div\",{id:\"appentHtml\"}),React.createElement(\"div\",{className:\"clearfix\"}),\" \",React.createElement(\"input\",{type:\"hidden\",name:\"id_user\",id:\"id_user\"}),React.createElement(\"div\",{className:\"hd-Form\"},\" B\\u01B0\\u1EDBc 2: Ch\\u1ECDn ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n (*)\"),React.createElement(\"div\",{className:\"panel-group paytogame\",id:\"accordion\"},React.createElement(\"div\",{className:\"panel panel-default\"},React.createElement(\"div\",{className:\"panel-heading\"},React.createElement(\"h4\",{className:\"panel-title\"},React.createElement(\"a\",{\"data-toggle\":\"collapse\",\"data-parent\":\"#accordion\",href:\"#collapse1\"},\"N\\u1EA1p th\\u1EBB c\\xE0o\"))),React.createElement(\"div\",{id:\"collapse1\",className:\"panel-collapse collapse in\"},React.createElement(Form,{onSubmit:function onSubmit(e){return _this2.handlePayByCard(e);},ref:function ref(c){_this2.formCardPay=c;}},React.createElement(\"div\",{className:\"panel-body\"},React.createElement(\"label\",{htmlFor:\"sltCardType\",className:\"col-sm-12 controll-label\"},React.createElement(\"span\",null,\"Lo\\u1EA1i th\\u1EBB\"),React.createElement(Select,{name:\"sltCardType\",onChange:this.handleChange,className:\"form-control\",validations:[required]},React.createElement(\"option\",{value:\"\"},\"Ch\\u1ECDn lo\\u1EA1i th\\u1EBB\"),React.createElement(\"option\",{value:\"HPC\"},\"HPCode\"),React.createElement(\"option\",{value:\"GATE\"},\"GATE\"))),React.createElement(\"label\",{htmlFor:\"txtSerie\",className:\"col-sm-12 controll-label\"},React.createElement(\"span\",null,\"S\\u1ED1 serie\"),React.createElement(Input,{name:\"txtSerie\",onChange:this.handleChange,type:\"text\",placeholder:\"\",className:\"form-control\",validations:[required,minLength,maxLength]})),React.createElement(\"label\",{htmlFor:\"txtCardPin\",className:\"col-sm-12 controll-label\"},React.createElement(\"span\",null,\"M\\xE3 th\\u1EBB\"),React.createElement(Input,{name:\"txtCardPin\",onChange:this.handleChange,type:\"text\",placeholder:\"\",className:\"form-control\",validations:[required,minLength,maxLength]})),React.createElement(\"button\",{disabled:this.props.isLoadingReducer.isLoading,id:\"submitCard\",className:\"col-sm-3 btn btn-primary\"},this.props.isLoadingReducer.isLoading?React.createElement(\"div\",{className:'dot-loader'},React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null)):'thanh toán'),React.createElement(CheckButton,{style:{display:'none'},ref:function ref(c){_this2.checkBtn1=c;}}),paymentReducer.chargeCard.status===1?React.createElement(\"span\",{className:\"message-success\"},paymentReducer.chargeCard.messages):React.createElement(\"span\",{className:\"message-alert\"},paymentReducer.chargeCard.messages))))),React.createElement(\"div\",{className:\"panel panel-default\"},React.createElement(\"div\",{className:\"panel-heading\"},React.createElement(\"h4\",{className:\"panel-title\"},React.createElement(\"a\",{\"data-toggle\":\"collapse\",\"data-parent\":\"#accordion\",href:\"#collapse2\"},\"N\\u1EA1p th\\u1EBB ATM/iBanking\"))),React.createElement(\"div\",{id:\"collapse2\",className:\"panel-collapse collapse\"},React.createElement(Form,{onSubmit:function onSubmit(e){return _this2.handlePayByATM(e);},ref:function ref(c){_this2.formAtmPay=c;}},React.createElement(\"div\",{className:\"panel-body\"},React.createElement(\"label\",{htmlFor:\"sltAmount\",className:\"col-sm-12 controll-label\"},React.createElement(\"span\",null,\"S\\u1ED1 ti\\u1EC1n thanh to\\xE1n (VN\\u0110)\"),React.createElement(Select,{name:\"sltAmount\",onChange:this.handleChange,className:\"form-control\",validations:[required]},React.createElement(\"option\",{value:\"\"},\"Ch\\u1ECDn s\\u1ED1 ti\\u1EC1n\"),React.createElement(\"option\",{value:10000},\"10,000\"),React.createElement(\"option\",{value:20000},\"20,000\"),React.createElement(\"option\",{value:50000},\"50,000\"),React.createElement(\"option\",{value:100000},\"100,000\"),React.createElement(\"option\",{value:200000},\"200,000\"),React.createElement(\"option\",{value:300000},\"300,000\"),React.createElement(\"option\",{value:500000},\"500,000\"),React.createElement(\"option\",{value:1000000},\"1,000,000\"),React.createElement(\"option\",{value:2000000},\"2,000,000\"))),React.createElement(\"button\",{disabled:this.props.isLoadingReducer.isLoading,id:\"submitAtm\",className:\"col-sm-3 btn btn-primary\"},this.props.isLoadingReducer.isLoading?React.createElement(\"div\",{className:'dot-loader'},React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null)):'thanh toán'),React.createElement(CheckButton,{style:{display:'none'},ref:function ref(c){_this2.checkBtn2=c;}}))))),React.createElement(\"div\",{className:\"message-alert\"},\"N\\u1EA0P HPCODE = 100% ; GATE = 100% ; VCOIN = 90% ; ATM = 100% (Th\\u1EBB HPCode c\\xF3 b\\xE1n \\u1EDF c\\xE1c c\\u1EEDa h\\xE0ng c\\u1EE7a Payoo & b\\xE1n online t\\u1EA1i Website Napthegame.net )\")),React.createElement(\"div\",{className:\"clearfix\"}),React.createElement(\"div\",{className:\"modal modal-atm-report fade\",tabIndex:\"-1\",role:\"dialog\",\"data-backdrop\":\"false\"},React.createElement(\"div\",{className:\"modal-dialog\",role:\"document\"},React.createElement(\"div\",{className:\"modal-content\"},React.createElement(\"div\",{className:\"modal-body\"},React.createElement(\"p\",{className:\"text-center\"},chargeAtmMSG)))))));}}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps,prevState){var userRole=nextProps.paymentReducer.userRole.data;if(prevState.sltServer!==''&&userRole){return{userRole:nextProps.paymentReducer.userRole,sltRoleId:prevState.sltRoleId!==''?prevState.sltRoleId:userRole.role[0].roleId,errorSelectRole:[]};}return{userRole:{},sltRoleId:''};}}]);return Paytogame;}(Component);var mapStateToProps=function mapStateToProps(state){return{gamesReducer:state.gamesReducer,paymentReducer:state.paymentReducer,isLoadingReducer:state.isLoadingReducer};};var mapDispatchToProps=function mapDispatchToProps(dispatch,props){return{getDetailGameToGame:function getDetailGameToGame(productId){dispatch(gameActions.getDetailGameToGameRequest(productId));},chargeCard:function chargeCard(params){dispatch(paymentActions.chargeCardRequest(params));},chargeAtm:function chargeAtm(params){dispatch(paymentActions.chargeAtmRequest(params));},getUserRole:function(){var _getUserRole=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(serverId,userId,agent){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return dispatch(paymentActions.getUserRoleRequest(serverId,userId,agent));case 2:case\"end\":return _context2.stop();}}},_callee2);}));function getUserRole(_x2,_x3,_x4){return _getUserRole.apply(this,arguments);}return getUserRole;}(),chargeAtmSuccess:function chargeAtmSuccess(paramStr){dispatch(paymentActions.chargeAtmSuccess(paramStr));}};};export default connect(mapStateToProps,mapDispatchToProps)(withRouter(Paytogame));","map":{"version":3,"sources":["C:/reactjs/payv2/pay-v2.phoeniz.com/src/components/Paytogame.js"],"names":["React","Component","connect","gameActions","paymentActions","withRouter","_","Form","Input","Select","CheckButton","required","minLength","maxLength","Paytogame","props","checkHasRole","errorSelectRole","state","sltRoleId","push","setState","handlePayByCard","e","preventDefault","formCardPay","validateAll","errorRole","checkBtn1","context","_errors","length","chargeCard","handlePayByATM","formAtmPay","checkBtn2","chargeAtm","hanleGetRole","event","target","serverId","value","getUserRole","JSON","parse","localStorage","getItem","data","id","gameInfo","agent","paymentReducer","userRole","undefined","sltServer","handleChange","type","checked","name","username","sltCardType","txtSerie","txtCardPin","sltAmount","chargeSuccessMSG","errorsAtm","errorsCard","errorSelectServer","match","getDetailGameToGame","params","queryString","require","strParams","location","search","has","chargeAtmSuccess","console","log","messages","modalATMReport","window","$","modal","on","previousProps","previousState","Object","keys","gameData","gamesReducer","key","hasOwnProperty","slug","chargeAtmMSG","server","detail","serverElement","map","val","index","server_id","server_name","textAlign","role","roleId","roleName","c","isLoadingReducer","isLoading","display","status","nextProps","prevState","mapStateToProps","mapDispatchToProps","dispatch","productId","getDetailGameToGameRequest","chargeCardRequest","chargeAtmRequest","userId","getUserRoleRequest","paramStr"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport \"../assets/css/paytogame.css\"\r\nimport gameActions from \"../actions/games.actions\"\r\nimport paymentActions from \"../actions/payment.actions\"\r\nimport { withRouter } from 'react-router-dom';\r\nimport * as _ from 'lodash';\r\nimport Form from 'react-validation/build/form';\r\nimport Input from 'react-validation/build/input';\r\nimport Select from 'react-validation/build/select';\r\nimport CheckButton from 'react-validation/build/button';\r\nimport {required, minLength, maxLength} from \"../utils/validateInput\";\r\n\r\n\r\nclass Paytogame extends Component {\r\n\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            username: JSON.parse(localStorage.getItem('user')).data.username,\r\n            userRole: {},\r\n            sltRoleId: '',\r\n            sltServer: '',\r\n            sltCardType: '',\r\n            txtSerie: '',\r\n            txtCardPin: '',\r\n            sltAmount: '',\r\n            gameInfo: {},\r\n            chargeSuccessMSG : '',\r\n            errorsAtm: [],\r\n            errorsCard: [],\r\n            errorSelectServer: [],\r\n            errorSelectRole: []\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        let {match} = this.props\r\n        this.props.getDetailGameToGame(match.params.id)\r\n        let queryString = require('query-string');\r\n        let strParams = this.props.location.search;\r\n        let params = queryString.parse(strParams);\r\n        if (_.has(params, 'trans_id')) {\r\n            this.props.chargeAtmSuccess(strParams)\r\n            console.log(this.props)\r\n            if(this.props.paymentReducer.chargeAtmSuccess.messages !== null)\r\n            {\r\n                let modalATMReport = window.$('.modal-atm-report');\r\n                modalATMReport.modal('show');\r\n                modalATMReport.on('click', function () {\r\n                    modalATMReport.modal('hide')\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(previousProps, previousState){\r\n        if(Object.keys(previousState.gameInfo).length === 0)\r\n        {\r\n            let gameData = previousProps.gamesReducer.data;\r\n            for (var key in gameData) {\r\n                if (gameData.hasOwnProperty(key)) {\r\n                    if(gameData[key].slug === previousProps.match.params.slug)\r\n                    {\r\n                        this.setState({\r\n                            gameInfo: gameData[key]\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    static getDerivedStateFromProps(nextProps, prevState){\r\n        let userRole = nextProps.paymentReducer.userRole.data\r\n        \r\n        if(prevState.sltServer !== '' && userRole)\r\n        {\r\n            return {\r\n                userRole: nextProps.paymentReducer.userRole,\r\n                sltRoleId: prevState.sltRoleId!==''?prevState.sltRoleId:userRole.role[0].roleId,\r\n                errorSelectRole: []\r\n            }            \r\n        }\r\n        return {\r\n            userRole: {},\r\n            sltRoleId: '',\r\n        }\r\n    }\r\n\r\n    checkHasRole = () => {\r\n        let errorSelectRole = [];\r\n        if(this.state.sltRoleId === ''){\r\n            errorSelectRole.push('không tìm thấy thông tin nhân vật')\r\n        }\r\n        this.setState({\r\n            errorSelectRole: errorSelectRole\r\n        })\r\n        return errorSelectRole;\r\n    }\r\n\r\n    handlePayByCard = (e) =>{\r\n        e.preventDefault();\r\n        this.formCardPay.validateAll();\r\n        let errorRole =  this.checkHasRole();\r\n        if ( this.checkBtn1.context._errors.length === 0 && errorRole.length === 0) {\r\n            this.props.chargeCard(this.state)\r\n        }\r\n    }\r\n\r\n    handlePayByATM = (e) => {\r\n        e.preventDefault();\r\n        this.formAtmPay.validateAll();\r\n        let errorRole =  this.checkHasRole();\r\n        if ( this.checkBtn2.context._errors.length === 0 && errorRole.length === 0 ) {\r\n            this.props.chargeAtm(this.state)\r\n        }\r\n    }\r\n\r\n    hanleGetRole = async (event) =>{\r\n        const target = event.target;\r\n        const serverId = target.value;\r\n        if(serverId !== ''){\r\n            await this.props.getUserRole(serverId, JSON.parse(localStorage.getItem('user')).data.id, this.state.gameInfo.agent);\r\n            if(this.props.paymentReducer.userRole.data === undefined){\r\n                this.setState({\r\n                    errorSelectRole: ['không tìm thấy thông tin nhân vật']\r\n                })\r\n            }\r\n        }else{\r\n            this.setState({\r\n                errorSelectRole: ''\r\n            })      \r\n        }\r\n        this.setState({\r\n            sltServer: serverId,\r\n        })\r\n    }\r\n\r\n    handleChange = (event) =>{\r\n        const target = event.target;\r\n        const value = target.type === 'checkbox' ? target.checked : target.value;\r\n        const name = target.name;\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    }\r\n\r\n    render() {\r\n        // console.log(this.state)\r\n        let chargeAtmMSG = '';\r\n        if(this.props.paymentReducer.chargeAtmSuccess.data !== undefined)\r\n        {\r\n            chargeAtmMSG = this.props.paymentReducer.chargeAtmSuccess.data.messages\r\n        }\r\n        let server = this.props.gamesReducer.detail;\r\n        let serverElement = null;\r\n        if(server.length > 0)\r\n        {\r\n            serverElement = server.map((val, index) => {\r\n                return <option key={index} value={val.server_id}>{val.server_name}</option>\r\n            })\r\n        }\r\n        let {errorSelectServer, gameInfo, userRole, errorSelectRole} = this.state;\r\n        let {paymentReducer} = this.props;\r\n        if(Object.keys(gameInfo).length === 0 || server.length === 0){\r\n            return (<div style={{textAlign: \"center\"}}>\r\n                        <div className=\"lds-dual-ring\"></div>\r\n                    </div>)\r\n        }else{\r\n            return (\r\n                <div className=\"container paytogame_container\">\r\n                    <div className=\"row box\">\r\n                        <h2>{gameInfo.name}</h2>\r\n                        <div className=\"hd-Form\"> Bước 1: Chọn thông tin nhân vật (*)</div>\r\n                        <label htmlFor=\"sltServer\" className=\"col-sm-12 controll-label\" id=\"list_server\"> Chọn server:</label>\r\n                        {errorSelectServer && (<span className=\"input-error\">{errorSelectServer[0]}</span>)}\r\n                        <select name=\"sltServer\" value={this.state.sltServer} onChange={this.hanleGetRole} className=\"form-control \" id=\"server_list\">\r\n                            <option value=\"\">Chọn server</option>\r\n                            {serverElement}\r\n                        </select>\r\n                        {\r\n                            Object.keys(userRole).length > 0 ?\r\n                            (<div>\r\n                                <label htmlFor=\"sltRoleId\" className=\"col-sm-12 controll-label\"> Chọn nhân vật:</label>\r\n                                <select name=\"sltRoleId\" onChange={this.handleChange} className=\"form-control \" id=\"userRole\">\r\n                                {userRole.data.role.map((val, index) => {\r\n                                    return <option key={index} value={val.roleId}>{val.roleName}</option>\r\n                                })}\r\n                                </select>\r\n                            </div>)\r\n                            :<span className=\"input-error\">{errorSelectRole[0]}</span>\r\n                        }\r\n                        <div id=\"appentHtml\" />\r\n                        <div className=\"clearfix\" /> <input type=\"hidden\" name=\"id_user\" id=\"id_user\" />\r\n                        <div className=\"hd-Form\"> Bước 2: Chọn phương thức thanh toán (*)</div>\r\n                        <div className=\"panel-group paytogame\" id=\"accordion\">\r\n                            <div className=\"panel panel-default\">\r\n                                <div className=\"panel-heading\">\r\n                                    <h4 className=\"panel-title\">\r\n                                        <a data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapse1\">Nạp thẻ cào</a>\r\n                                    </h4>\r\n                                </div>\r\n                                <div id=\"collapse1\" className=\"panel-collapse collapse in\">\r\n                                    <Form onSubmit={e => this.handlePayByCard(e)} ref={c => { this.formCardPay = c }}>\r\n                                        <div className=\"panel-body\">\r\n                                            <label htmlFor=\"sltCardType\" className=\"col-sm-12 controll-label\">\r\n                                                <span>Loại thẻ</span>\r\n                                                <Select name='sltCardType' onChange={this.handleChange} className=\"form-control\" validations={[required]}>\r\n                                                    <option value=\"\">Chọn loại thẻ</option>\r\n                                                    <option value=\"HPC\">HPCode</option>\r\n                                                    <option value=\"GATE\">GATE</option>\r\n                                                </Select>\r\n                                            </label>\r\n                                            <label htmlFor=\"txtSerie\" className=\"col-sm-12 controll-label\">\r\n                                                <span>Số serie</span>\r\n                                                <Input \r\n                                                    name=\"txtSerie\" \r\n                                                    onChange={this.handleChange}\r\n                                                    type=\"text\" \r\n                                                    placeholder=\"\"\r\n                                                    className=\"form-control\" \r\n                                                    validations={[required, minLength, maxLength]}\r\n                                                />\r\n                                            </label>\r\n                                            <label htmlFor=\"txtCardPin\" className=\"col-sm-12 controll-label\">\r\n                                                <span>Mã thẻ</span>\r\n                                                <Input \r\n                                                    name=\"txtCardPin\" \r\n                                                    onChange={this.handleChange}\r\n                                                    type=\"text\" \r\n                                                    placeholder=\"\"\r\n                                                    className=\"form-control\" \r\n                                                    validations={[required, minLength, maxLength]}\r\n                                                />\r\n                                            </label>\r\n                                            <button disabled={this.props.isLoadingReducer.isLoading} id=\"submitCard\" className=\"col-sm-3 btn btn-primary\">{this.props.isLoadingReducer.isLoading?\r\n                                            <div className={'dot-loader'}>\r\n                                                <div></div>\r\n                                                <div></div>\r\n                                                <div></div>\r\n                                                <div></div>\r\n                                                <div></div>\r\n                                            </div>\r\n                                            :'thanh toán'}</button>\r\n                                            <CheckButton style={{ display: 'none' }} ref={c => { this.checkBtn1 = c }} />\r\n                                            {\r\n                                            paymentReducer.chargeCard.status === 1 ?(<span className=\"message-success\">\r\n                                                {paymentReducer.chargeCard.messages}\r\n                                            </span>):(<span className=\"message-alert\">\r\n                                                {paymentReducer.chargeCard.messages}\r\n                                            </span>)\r\n                                            }\r\n                                        </div>\r\n                                    </Form>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"panel panel-default\">\r\n                                <div className=\"panel-heading\">\r\n                                    <h4 className=\"panel-title\">\r\n                                        <a data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapse2\">Nạp thẻ ATM/iBanking</a>\r\n                                    </h4>\r\n                                </div>\r\n                                <div id=\"collapse2\" className=\"panel-collapse collapse\">\r\n                                    <Form onSubmit={e => this.handlePayByATM(e)} ref={c => { this.formAtmPay = c }}>\r\n                                        <div className=\"panel-body\">\r\n                                            <label htmlFor=\"sltAmount\" className=\"col-sm-12 controll-label\">\r\n                                                <span>Số tiền thanh toán (VNĐ)</span>\r\n                                                <Select name='sltAmount' onChange={this.handleChange} className=\"form-control\" validations={[required]}>\r\n                                                    <option value=\"\">Chọn số tiền</option>\r\n                                                    <option value={10000}>10,000</option>\r\n                                                    <option value={20000}>20,000</option>\r\n                                                    <option value={50000}>50,000</option>\r\n                                                    <option value={100000}>100,000</option>\r\n                                                    <option value={200000}>200,000</option>\r\n                                                    <option value={300000}>300,000</option>\r\n                                                    <option value={500000}>500,000</option>\r\n                                                    <option value={1000000}>1,000,000</option>\r\n                                                    <option value={2000000}>2,000,000</option>\r\n                                                </Select>\r\n                                            </label>\r\n                                            <button disabled={this.props.isLoadingReducer.isLoading} id=\"submitAtm\" className=\"col-sm-3 btn btn-primary\">{this.props.isLoadingReducer.isLoading?\r\n                                            <div className={'dot-loader'}>\r\n                                                <div></div>\r\n                                                <div></div>\r\n                                                <div></div>\r\n                                                <div></div>\r\n                                                <div></div>\r\n                                            </div>\r\n                                            :'thanh toán'}</button>\r\n                                            <CheckButton style={{ display: 'none' }} ref={c => { this.checkBtn2 = c }} />\r\n                                        </div>\r\n                                    </Form>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"message-alert\">\r\n                                NẠP HPCODE = 100% ; GATE = 100% ; VCOIN = 90% ; ATM = 100% (Thẻ HPCode có bán ở các cửa hàng của Payoo &amp; bán online tại Website Napthegame.net )\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"clearfix\" />\r\n                        <div className=\"modal modal-atm-report fade\" tabIndex=\"-1\" role=\"dialog\" data-backdrop=\"false\">\r\n                            <div className=\"modal-dialog\" role=\"document\">\r\n                                <div className=\"modal-content\">\r\n                                    <div className=\"modal-body\">\r\n                                        <p className={\"text-center\"}>{chargeAtmMSG}</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    gamesReducer: state.gamesReducer,\r\n    paymentReducer: state.paymentReducer,\r\n    isLoadingReducer: state.isLoadingReducer\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch, props) => {\r\n    return {\r\n        getDetailGameToGame: (productId) => {\r\n            dispatch(gameActions.getDetailGameToGameRequest(productId))\r\n        },\r\n        chargeCard: (params) => {\r\n            dispatch(paymentActions.chargeCardRequest(params))\r\n        },\r\n        chargeAtm: (params) => {\r\n            dispatch(paymentActions.chargeAtmRequest(params))\r\n        },\r\n        getUserRole: async ( serverId, userId, agent) => {\r\n            await dispatch(paymentActions.getUserRoleRequest(serverId, userId, agent))\r\n        },\r\n        chargeAtmSuccess: (paramStr) => {\r\n            dispatch(paymentActions.chargeAtmSuccess(paramStr))\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Paytogame))"]},"metadata":{},"sourceType":"module"}