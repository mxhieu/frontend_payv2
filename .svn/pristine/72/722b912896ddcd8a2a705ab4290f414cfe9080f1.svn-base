{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import'../assets/css/paytowallet.css';import*as _ from'lodash';import api from'../utils/Api';import apiConfig from'../config/ApiConfig';import commonConfig from'../config/CommonConfig';import Validate from\"../utils/Validate\";import PayBreadcrumb from'./PayBreadcrumb';var Paytowallet=/*#__PURE__*/function(_Component){_inherits(Paytowallet,_Component);/**\r\n     * Constructor\r\n     * @param props\r\n     * @created 2020-03-18 LongTHK\r\n     */function Paytowallet(props){var _this;_classCallCheck(this,Paytowallet);_this=_possibleConstructorReturn(this,_getPrototypeOf(Paytowallet).call(this,props));_this.changeServerGroup=function(event){// get server group value\nvar serverGroupValue=event.target.value;// load servers list base on group\nif(serverGroupValue!==''){_this.setState({serversList:_this.state.serverGroups[serverGroupValue],isDisableSelectServers:false});}else{_this.setState({isDisableSelectServers:true});}};_this.handleChange=function(event){var target=event.target;var value=target.type==='checkbox'?target.checked:target.value;var name=target.name;_this.setState(function(prevState){return{payItem:_objectSpread({},prevState.payItem,_defineProperty({},name,value))};});};_this.handleServerChanged=function(event){// get md5\nvar md5=require('md5');// get params\nvar userId=JSON.parse(localStorage.getItem('user')).data.id;var sign=md5(userId+apiConfig.jwtToken);var serverId=event.target.value;// define endpoint\nvar endPoint=apiConfig.domain+apiConfig.endpoint.getRole+'?server_id='+serverId+'&id_user='+userId+'&productAgent='+_this.state.game.agent+'&sign='+sign;// call api\napi.call('GET',endPoint).then(function(response){// get response data\nvar responseData=response.data;// set roles list\nif(responseData.status){// get roles list\nvar rolesList=responseData.data.role;// set roles list\n_this.setState({rolesList:rolesList});// set charge game item\n_this.setState({chargeGameItem:{serverId:serverId,roleId:rolesList[0].roleId}});}else{// clear roles list\n_this.setState({rolesList:[]});// clear charge game item\n_this.setState({chargeGameItem:{}});}}).catch(function(error){console.log(error);});};_this.openModal=function(event){// get gold id\nvar goldId=window.$(event.target).data('gold-id');if(window.$(event.target).data('amount')>_this.state.balance){// set state\n_this.setState({modalContent:'Không đủ số dư trong tài khoản, hãy chọn mệnh giá thấp hơn hoặc nạp thêm tiền vào ví để tiếp tục giao dịch'});// create modal\nvar modal=window.$('.modal-notification');// modal close action\nmodal.on('click',function(){modal.modal('hide');});// show modal\nmodal.modal('show');}else{// get gold id\n_this.setState(function(prevState){return{chargeGameItem:_objectSpread({},prevState.chargeGameItem,{goldId:goldId})};});// create modal\nvar _modal=window.$('.modal-confirm');// modal close action\n_modal.on('hidden.bs.modal',function(){this.setState({chargeGameResult:{}});}.bind(_assertThisInitialized(_this)));// show modal\n_modal.modal('show');}};_this.changeRoleId=function(event){_this.setState(function(prevState){return{chargeGameItem:_objectSpread({},prevState,{roleId:event.target.value})};});};_this.chargeGame=function(event){// stop propagation\nevent.stopPropagation();// get md5\nvar md5=require('md5');// create end point\nvar endPoint=apiConfig.domain+apiConfig.endpoint.payToGame+'?roleId='+_this.state.chargeGameItem.roleId+'&goldId='+_this.state.chargeGameItem.goldId+'&username='+_this.state.username+'&productAgent='+_this.state.game.agent+'&serverId='+_this.state.chargeGameItem.serverId+'&sign='+md5(_this.state.username+apiConfig.jwtToken);// call api\napi.call('GET',endPoint).then(function(response){// get response data\nvar responseData=response.data;// set state\n_this.setState({chargeGameResult:{status:responseData.status,message:responseData.messages}});}).catch(function(err){console.log('err');});};_this.changePayItem=function(payType){switch(payType){case'card':_this.setState({payItem:{cardType:'',serie:'',number:''}});break;case'atm':_this.setState({payItem:{amount:''}});break;default:_this.setState({payItem:{cardType:'',serie:'',number:''}});}// push value to pay item\n_this.setState(function(prevState){return{payItem:_objectSpread({},prevState.payItem,{username:_this.state.username,productAgent:_this.state.game.agent})};});// reset error\n_this.setState({errors:{}});};_this.payByCard=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var md5,payItem,endPoint;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// reset error\n_this.setState({errors:{}});_context.next=3;return _this.validatePayByCard();case 3:if(!_context.sent){_context.next=9;break;}// set inProcessing mode\n_this.setState({inProcessing:true});// get md5\nmd5=require('md5');// get pay item\npayItem=_this.state.payItem;// generate endpoint\nendPoint=apiConfig.domain+apiConfig.endpoint.paymentWalletChargeCard+'?serial='+payItem.serie+'&code='+payItem.number+'&username='+payItem.username+'&productAgent='+payItem.productAgent+'&type='+payItem.cardType+'&sign='+md5(payItem.username+apiConfig.jwtToken);// call api\napi.call('GET',endPoint).then(function(response){// get response data\nvar responseData=response.data;// set state\nif(responseData.status){_this.setState({balance:responseData.data.balance,processingResult:{status:true,message:responseData.messages}});}else{_this.setState({processingResult:{status:false,message:responseData.messages}});}}).catch(function(err){console.log(err);}).finally(function(){// release inProcessing mode\n_this.setState({inProcessing:false});});case 9:case\"end\":return _context.stop();}}},_callee);}));_this.payByATM=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var md5,payItem,endPoint;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// reset error\n_this.setState({errors:{}});_context2.next=3;return _this.validatePayByATM();case 3:if(!_context2.sent){_context2.next=9;break;}// set inProcessing mode\n_this.setState({inProcessing:true});// get md5\nmd5=require('md5');// get pay item\npayItem=_this.state.payItem;// generate endpoint\nendPoint=apiConfig.domain+apiConfig.endpoint.paymentWalletChargeATM+'?username='+payItem.username+'&productAgent='+payItem.productAgent+'&amount='+payItem.amount+'&sign='+md5(payItem.username+apiConfig.jwtToken);// call api\napi.call('GET',endPoint).then(function(response){window.location.href=response.data.data.link;}).catch(function(err){// release inProcessing mode\n_this.setState({inProcessing:false});console.log(err);});case 9:case\"end\":return _context2.stop();}}},_callee2);}));_this.validatePayByCard=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var isValid,errors;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// define valid status\nisValid=true;// define errors\nerrors={};// check card type\nif(Validate.isRequired(_this.state.payItem.cardType)){errors.cardType='Vui lòng chọn loại thẻ';isValid=false;}// check serie\nif(Validate.isRequired(_this.state.payItem.serie)){errors.serie='Vui lòng nhập số seri';isValid=false;}if(Validate.maxLength(_this.state.payItem.serie,20)){errors.serie='Seri tối đa 20 ký tự';isValid=false;}if(Validate.minLength(_this.state.payItem.serie,6)){errors.serie='Seri tối thiểu 6 ký tự';isValid=false;}// check number\nif(Validate.isRequired(_this.state.payItem.number)){errors.number='Vui lòng nhập mã thẻ';isValid=false;}if(Validate.maxLength(_this.state.payItem.number,20)){errors.number='Mã thẻ tối đa 20 ký tự';isValid=false;}if(Validate.minLength(_this.state.payItem.number,6)){errors.number='Mã thẻ tối thiểu 6 ký tự';isValid=false;}// set errors\n_context3.next=11;return _this.setState({errors:errors});case 11:return _context3.abrupt(\"return\",isValid);case 12:case\"end\":return _context3.stop();}}},_callee3);}));_this.validatePayByATM=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var isValid,errors;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// define valid status\nisValid=true;// define errors\nerrors={};// check amount\nif(Validate.isRequired(_this.state.payItem.amount)){errors.amount='Vui lòng chọn số tiền nạp';isValid=false;}// set errors\n_context4.next=5;return _this.setState({errors:errors});case 5:return _context4.abrupt(\"return\",isValid);case 6:case\"end\":return _context4.stop();}}},_callee4);}));_this.state={username:'',balance:0,game:{},cardsList:commonConfig.CardsList,atmValuesList:commonConfig.ATMValuesList,serverGroups:[],serversList:[],goldsList:[],isDisableSelectServers:true,payItem:{},inLoadingPage:false,inProcessing:false,processingResult:{status:null,message:''},errors:{},chargeGameItem:{},chargeGameResult:{},rolesList:null,modalContent:''};return _this;}/**\r\n     * On component did mount event\r\n     * @created 2020-03-18 LongTHk\r\n     */_createClass(Paytowallet,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// get md5\nvar md5=require('md5');// get username\nvar username=JSON.parse(localStorage.getItem('user')).data.username;// get query string\nvar queryString=require('query-string');// set inLoadingPage status\nthis.setState({inLoadingPage:true});// call api get page content\nvar slug=this.props.match.match.params.slug;var sign=md5(username+apiConfig.jwtToken);var endPoint=apiConfig.domain+apiConfig.endpoint.getDetailGameToWallet+'?slug='+slug+'&username='+username+'&sign='+sign;api.call('GET',endPoint).then(function(response){// get return data\nvar data=response.data.data;// spit servers list into server groups\nvar serverGroups=_.chunk(data.servers,10);// set state\n_this2.setState({username:username,balance:data.balance,game:Object.keys(data).length>0?data.game[0]:null,serverGroups:serverGroups,goldsList:data.golds});// call api check Charging ATM status\nvar strParams=_this2.props.match.location.search;var params=queryString.parse(strParams);if(_.has(params,'trans_id')){var endpointATMSuccess=apiConfig.domain+apiConfig.endpoint.paymentWalletChargeATMSuccess+strParams;api.call('GET',endpointATMSuccess).then(function(response){// set atm response message\n_this2.setState({modalContent:response.data.messages});// create modal\nvar modal=window.$('.modal-notification');// modal close action\nmodal.on('click',function(){modal.modal('hide');});// show modal\nmodal.modal('show');}).catch(function(err){console.log(err);});}}).catch(function(err){console.log(err);}).finally(function(){// set inLoadingPage status\n_this2.setState({inLoadingPage:false});});}/**\r\n     * Action on server group changee\r\n     * @param event\r\n     * @crated 2020-03018 LongTHK\r\n     */},{key:\"render\",/**\r\n     * Render layout\r\n     * @returns {*}\r\n     * @created 2020-03-18 LongTHK\r\n     */value:function render(){var _this3=this;/**\r\n         * Loading page animation\r\n         */if(this.state.inLoadingPage){return React.createElement(\"div\",{style:{textAlign:\"center\"}},React.createElement(\"div\",{className:\"lds-dual-ring\"}));}/**\r\n         * Render in case game not found\r\n         */if(this.state.game===null){return React.createElement(\"div\",null,React.createElement(\"h1\",{className:\"text-center\"},\"Kh\\xF4ng t\\xECm th\\u1EA5y game\"));}/**\r\n         * Page render\r\n         */return React.createElement(\"div\",{className:\"container paytowallet_container\"},React.createElement(\"div\",{className:\"row box\"},React.createElement(PayBreadcrumb,{match:this.props.match.match}),React.createElement(\"form\",{method:\"POST\",name:\"napgold\",id:\"napgold\",noValidate:\"novalidate\"},React.createElement(\"h2\",null,this.state.game.name),React.createElement(\"div\",{className:\"qa-message-list\",id:\"wallmessages\"},React.createElement(\"div\",{className:\"message-item\",id:\"accRole\"},React.createElement(\"div\",{className:\"message-inner\"},React.createElement(\"div\",{className:\"message-head clearfix handle-acc-role\"},React.createElement(\"div\",{className:\"user-detail\"},React.createElement(\"h5\",{className:\"handle\"},\"T\\xE0i kho\\u1EA3n : \",this.state.username),React.createElement(\"h6\",{className:\"handle\"},\"S\\u1ED1 d\\u01B0 : \",this.state.balance.toLocaleString('it-IT',{style:'currency',currency:'VND'})),React.createElement(\"input\",{type:\"hidden\",defaultValue:0,name:\"balance\"}),React.createElement(\"input\",{type:\"hidden\",defaultValue:771866,name:\"id_user\",id:\"id_user\"}),React.createElement(\"input\",{type:\"hidden\",defaultValue:0,name:\"amount\",id:\"amount\"}),React.createElement(\"input\",{type:\"hidden\",defaultValue:0,name:\"gold_id\",id:\"gold_id\"}),React.createElement(\"input\",{type:\"hidden\",defaultValue:true,name:\"theThang\",id:\"theThang\"}))))),React.createElement(\"div\",{className:\"message-item\",id:\"accType\"},React.createElement(\"div\",{className:\"message-inner\"},React.createElement(\"div\",{className:\"message-head clearfix\"},React.createElement(\"div\",{className:\"user-detail\"},React.createElement(\"h5\",{className:\"handle\"},\"Ch\\u1ECDn ph\\u01B0\\u01A1ng th\\u1EE9c \\u0111\\u1EC3 n\\u1EA1p ti\\u1EC1n v\\xE0o v\\xED\"))),React.createElement(\"div\",{className:\"qa-message-content\"},React.createElement(\"div\",{className:\"collapse-group\",id:\"accordion\"},React.createElement(\"div\",{className:\"panel panel-default\"},React.createElement(\"div\",{className:\"panel-heading\",role:\"tab\",id:\"headingOne\"},React.createElement(\"h4\",{className:\"panel-title\"},React.createElement(\"a\",{role:\"button\",\"data-toggle\":\"collapse\",href:\"#collapseOne\",onClick:this.changePayItem.bind(window.event,'card'),\"data-parent\":\"#accordion\",\"aria-expanded\":\"true\",\"aria-controls\":\"collapseOne\",className:\"trigger collapsed\"},\"Th\\u1EBB c\\xE0o\"))),React.createElement(\"div\",{id:\"collapseOne\",className:\"panel-collapse collapse\",role:\"tabpanel\",\"aria-labelledby\":\"headingOne\",\"data-id\":\"Th\\u1EBB c\\xE0o\"},React.createElement(\"div\",{className:\"panel-body\"},React.createElement(\"div\",{className:\"tab-pane active\",id:\"tab_card_pay\"},React.createElement(\"label\",{htmlFor:\"in_type\",className:\"col-sm-12 controll-label\"},React.createElement(\"span\",null,\"Lo\\u1EA1i th\\u1EBB\"),this.state.errors.hasOwnProperty('cardType')&&React.createElement(\"span\",{className:\"input-error\"},this.state.errors.cardType),React.createElement(\"select\",{name:\"cardType\",className:\"form-control valid\",\"aria-invalid\":\"false\",onChange:this.handleChange,onBlur:this.validatePayByCard},React.createElement(\"option\",{value:\"\"},\"Ch\\u1ECDn lo\\u1EA1i th\\u1EBB\"),_.map(this.state.cardsList,function(itemValue,itemIndex){return React.createElement(\"option\",{key:itemIndex,value:itemValue.type},itemValue.name);}))),React.createElement(\"label\",{htmlFor:\"in_serie\",className:\"col-sm-12 controll-label\"},React.createElement(\"span\",null,\"S\\u1ED1 serie\"),this.state.errors.hasOwnProperty('serie')&&React.createElement(\"span\",{className:\"input-error\"},this.state.errors.serie),React.createElement(\"input\",{type:\"text\",name:\"serie\",className:\"form-control\",onChange:this.handleChange,onBlur:this.validatePayByCard})),React.createElement(\"label\",{htmlFor:\"in_pin\",className:\"col-sm-12 controll-label\"},React.createElement(\"span\",null,\"M\\xE3 th\\u1EBB\"),this.state.errors.hasOwnProperty('number')&&React.createElement(\"span\",{className:\"input-error\"},this.state.errors.number),React.createElement(\"input\",{type:\"text\",name:\"number\",className:\"form-control\",onChange:this.handleChange,onBlur:this.validatePayByCard})),React.createElement(\"button\",{className:\"btn btn-info\",id:\"btnXacnhan\",type:\"button\",\"data-id\":\"the-cao\",onClick:this.payByCard,disabled:this.state.inProcessing},!this.state.inProcessing&&React.createElement(\"span\",null,\"Thanh to\\xE1n\"),this.state.inProcessing&&React.createElement(\"div\",{className:'dot-loader'},React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null))),this.state.processingResult.status!==null&&!this.state.processingResult.status&&React.createElement(\"span\",{className:\"message-alert\"},this.state.processingResult.message)||this.state.processingResult.status!==null&&this.state.processingResult.status&&React.createElement(\"span\",{className:\"message-success\"},this.state.processingResult.message),React.createElement(\"div\",{className:\"clearfix\"}))))),React.createElement(\"div\",{className:\"panel panel-default\"},React.createElement(\"div\",{className:\"panel-heading\",role:\"tab\",id:\"headingTwo\"},React.createElement(\"h4\",{className:\"panel-title\"},React.createElement(\"a\",{role:\"button\",\"data-toggle\":\"collapse\",href:\"#collapseTwo\",\"data-parent\":\"#accordion\",onClick:this.changePayItem.bind(window.event,'atm'),\"aria-expanded\":\"true\",\"aria-controls\":\"collapseTwo\",className:\"trigger collapsed\"},\"Th\\u1EBB ATM/N\\u1ED9i \\u0111\\u1ECBa/NAPAS\"))),React.createElement(\"div\",{id:\"collapseTwo\",className:\"panel-collapse collapse\",role:\"tabpanel\",\"aria-labelledby\":\"headingTwo\",\"data-id\":\"Th\\u1EBB ATM/N\\u1ED9i \\u0111\\u1ECBa/NAPAS\"},React.createElement(\"div\",{className:\"panel-body\"},React.createElement(\"div\",{id:\"tab_card_pay\"},React.createElement(\"label\",{htmlFor:\"amount_pay\",className:\"col-sm-12 controll-label\"},React.createElement(\"span\",null,\"S\\u1ED1 ti\\u1EC1n thanh to\\xE1n (VN\\u0110)\"),this.state.errors.hasOwnProperty('amount')&&React.createElement(\"span\",{className:\"input-error\"},this.state.errors.amount),React.createElement(\"select\",{name:\"amount\",className:\"form-control\",onChange:this.handleChange,onBlur:this.validatePayByATM},React.createElement(\"option\",{value:\"\"},\"Ch\\u1ECDn s\\u1ED1 ti\\u1EC1n\"),_.map(this.state.atmValuesList,function(itemValue,itemIndex){return React.createElement(\"option\",{key:itemIndex,value:itemValue.value},itemValue.displayText);}))),React.createElement(\"button\",{className:\"btn btn-info\",id:\"btnXacnhan\",type:\"button\",\"data-id\":\"the-atm\",onClick:this.payByATM,disabled:this.state.inProcessing},!this.state.inProcessing&&React.createElement(\"span\",null,\"Thanh to\\xE1n\"),this.state.inProcessing&&React.createElement(\"div\",{className:'dot-loader'},React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null))))))))),React.createElement(\"div\",{className:\"message-alert\"},\"N\\u1EA0P HPCODE = 100% ; GATE = 100% ; VCOIN = 90% ; ATM = 100% (Th\\u1EBB HPCode c\\xF3 b\\xE1n \\u1EDF c\\xE1c c\\u1EEDa h\\xE0ng c\\u1EE7a Payoo & b\\xE1n online t\\u1EA1i Website Napthegame.net )\"))),React.createElement(\"div\",{className:\"message-item\",id:\"accGetRole\"},React.createElement(\"div\",{className:\"message-inner\"},React.createElement(\"div\",{className:\"message-head clearfix\"},React.createElement(\"div\",{className:\"user-detail\"},React.createElement(\"h5\",{className:\"handle\"},\"Ch\\u1ECDn server \\u0111\\u1EC3 n\\u1EA1p ti\\u1EC1n v\\xE0o game\"))),React.createElement(\"div\",{className:\"qa-message-content content_server\"},React.createElement(\"div\",{className:\"divserverList\"},React.createElement(\"input\",{type:\"hidden\",name:\"agent\",id:\"agent\",defaultValue:\"m002\"}),React.createElement(\"label\",{htmlFor:\"server_group\",className:\"col-sm-12 controll-label\"},\"Ch\\u1ECDn c\\u1EE5m m\\xE1y ch\\u1EE7:\"),React.createElement(\"select\",{name:\"server_group\",className:\"form-control \",id:\"server_group\",onChange:this.changeServerGroup},React.createElement(\"option\",{value:\"\"},\"Ch\\u1ECDn group server\"),_.map(this.state.serverGroups,function(serverGroupValue,serverGroupIndex){return React.createElement(\"option\",{key:serverGroupIndex,value:serverGroupIndex},\"C\\u1EE5m m\\xE1y ch\\u1EE7 \",serverGroupIndex*10+1,\" - \",serverGroupIndex*10+10);})),React.createElement(\"label\",{htmlFor:\"server_list\",className:\"col-sm-12 controll-label\",style:{width:'auto'}},\"Ch\\u1ECDn server:\"),React.createElement(\"select\",{name:\"server_id\",className:\"form-control \",id:\"server_list\",disabled:this.state.isDisableSelectServers,onChange:this.handleServerChanged},React.createElement(\"option\",{value:\"\"},\"Ch\\u1ECDn server\"),_.map(this.state.serversList,function(serverValue,serverIndex){return React.createElement(\"option\",{key:serverIndex,value:serverValue.server_id},serverValue.server_name);}))),React.createElement(\"div\",{id:\"appentHtml\"},React.createElement(\"label\",{htmlFor:\"server_list\",className:\"col-sm-12 controll-label\",style:{width:'auto'}},\"\\xA0\"),this.state.rolesList!==null&&this.state.rolesList.length>0&&React.createElement(\"div\",null,React.createElement(\"select\",{name:\"rolesList\",className:\"form-control \",id:\"server_list\",onChange:this.changeRoleId},_.map(this.state.rolesList,function(roleValue,roleIndex){return React.createElement(\"option\",{key:roleIndex,value:roleValue.roleId},roleValue.roleName);}))),this.state.rolesList!==null&&this.state.rolesList.length===0&&React.createElement(\"div\",{className:\"role-name\"},\"Kh\\xF4ng t\\xECm th\\u1EA5y nh\\xE2n v\\u1EADt game\")),React.createElement(\"div\",{className:\"clearfix\"})))),this.state.rolesList!==null&&this.state.rolesList.length>0&&React.createElement(\"div\",{className:\"message-item\",id:\"accRang\"},React.createElement(\"div\",{className:\"message-inner\"},React.createElement(\"div\",{className:\"message-head clearfix\"},React.createElement(\"div\",{className:\"user-detail\"},React.createElement(\"h5\",{className:\"handle\"},\"Ch\\u1ECDn g\\xF3i v\\u1EADt ph\\u1EA9m\"),React.createElement(\"p\",{className:\"tab\",id:\"coingold\"},\"G\\xF3i Nguy\\xEAn B\\u1EA3o\"),React.createElement(\"p\",{className:\"tab\",id:\"coingift\"},\"G\\xF3i Qu\\xE0 \\u0110\\u1EB7c Bi\\u1EC7t\"))),React.createElement(\"div\",{className:\"qa-message-content\"},React.createElement(\"div\",{className:\"form-group resultCoin\"},React.createElement(\"div\",{id:\"showcoingold\"},_.map(this.state.goldsList,function(goldItemValue,goldItemIndex){return React.createElement(\"div\",{className:\"gold-item\",key:goldItemIndex},React.createElement(\"img\",{src:commonConfig.assetDomain+goldItemValue.image,\"data-amount\":goldItemValue.amount,\"data-gold-id\":goldItemValue.id,onClick:_this3.openModal}));})),React.createElement(\"div\",{id:\"showcoingift\"})),React.createElement(\"div\",{className:\"clearfix\"})))),React.createElement(\"div\",{id:\"myModal\",className:\"modal\"},React.createElement(\"div\",{className:\"modal-content clearfix\"},React.createElement(\"h1\",null,\"X\\xE1c nh\\u1EADn giao d\\u1ECBch\"),React.createElement(\"input\",{type:\"submit\",name:\"submit\",id:\"submitbutton\",className:\"col-sm-3 btn btn-primary\",defaultValue:\"Thanh to\\xE1n\"}),React.createElement(\"div\",{className:\"clearfix\"}),React.createElement(\"span\",{className:\"close btn-danger\"},\"Ch\\u1EA5p nh\\u1EADn\")))))),React.createElement(\"div\",{className:\"modal modal-notification fade\",tabIndex:\"-1\",role:\"dialog\",\"data-backdrop\":\"false\"},React.createElement(\"div\",{className:\"modal-dialog\",role:\"document\"},React.createElement(\"div\",{className:\"modal-content\"},React.createElement(\"div\",{className:\"modal-body\"},React.createElement(\"p\",{className:\"text-center\"},this.state.modalContent))))),React.createElement(\"div\",{className:\"modal modal-confirm fade\",tabIndex:\"-1\",role:\"dialog\",\"data-backdrop\":\"false\"},React.createElement(\"div\",{className:\"modal-dialog\",role:\"document\"},React.createElement(\"div\",{className:\"modal-content\"},Object.keys(this.state.chargeGameItem).length>0&&React.createElement(\"div\",{className:\"modal-body\"},React.createElement(\"p\",null,React.createElement(\"b\",null,\"Server:\"),\"\\xA0\",this.state.serversList[_.findIndex(this.state.serversList,function(item){return item.server_id===this.state.chargeGameItem.serverId;}.bind(this))].server_name),this.state.chargeGameItem.hasOwnProperty('goldId')&&React.createElement(\"p\",null,React.createElement(\"b\",null,\"G\\xF3i n\\u1EA1p:\"),\"\\xA0\",this.state.goldsList[_.findIndex(this.state.goldsList,function(item){return item.id===this.state.chargeGameItem.goldId;}.bind(this))].gold),React.createElement(\"p\",null,React.createElement(\"b\",null,\"S\\u1ED1 d\\u01B0 hi\\u1EC7n t\\u1EA1i:\"),\"\\xA0\",this.state.balance.toLocaleString('it-IT',{style:'currency',currency:'VND'})),this.state.chargeGameItem.hasOwnProperty('goldId')&&React.createElement(\"p\",null,React.createElement(\"b\",null,\"S\\u1ED1 ti\\u1EC1n c\\u1EA7n th\\xE0nh to\\xE1n:\"),\"\\xA0\",this.state.goldsList[_.findIndex(this.state.goldsList,function(item){return item.id===this.state.chargeGameItem.goldId;}.bind(this))].amount.toLocaleString('it-IT',{style:'currency',currency:'VND'})),this.state.chargeGameItem.hasOwnProperty('goldId')&&React.createElement(\"p\",null,React.createElement(\"b\",null,\"S\\u1ED1 d\\u01B0 c\\xF2n l\\u1EA1i:\"),\"\\xA0\",(this.state.balance-this.state.goldsList[_.findIndex(this.state.goldsList,function(item){return item.id===this.state.chargeGameItem.goldId;}.bind(this))].amount).toLocaleString('it-IT',{style:'currency',currency:'VND'}))),React.createElement(\"div\",{className:\"modal-footer\"},React.createElement(\"div\",{className:this.state.chargeGameResult.status!==0?'text-center text-success':'text-center text-danger'},this.state.chargeGameResult.message),React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:this.chargeGame},\"N\\u1EA1p v\\xE0o game\"),React.createElement(\"button\",{type:\"button\",className:\"btn btn-danger\",\"data-dismiss\":\"modal\"},\"\\u0110\\xF3ng\"))))));}}]);return Paytowallet;}(Component);export{Paytowallet as default};","map":{"version":3,"sources":["C:/reactjs/payv2/pay-v2.phoeniz.com/src/components/Paytowallet.js"],"names":["React","Component","_","api","apiConfig","commonConfig","Validate","PayBreadcrumb","Paytowallet","props","changeServerGroup","event","serverGroupValue","target","value","setState","serversList","state","serverGroups","isDisableSelectServers","handleChange","type","checked","name","prevState","payItem","handleServerChanged","md5","require","userId","JSON","parse","localStorage","getItem","data","id","sign","jwtToken","serverId","endPoint","domain","endpoint","getRole","game","agent","call","then","response","responseData","status","rolesList","role","chargeGameItem","roleId","catch","error","console","log","openModal","goldId","window","$","balance","modalContent","modal","on","chargeGameResult","bind","changeRoleId","chargeGame","stopPropagation","payToGame","username","message","messages","err","changePayItem","payType","cardType","serie","number","amount","productAgent","errors","payByCard","validatePayByCard","inProcessing","paymentWalletChargeCard","processingResult","finally","payByATM","validatePayByATM","paymentWalletChargeATM","location","href","link","isValid","isRequired","maxLength","minLength","cardsList","CardsList","atmValuesList","ATMValuesList","goldsList","inLoadingPage","queryString","slug","match","params","getDetailGameToWallet","chunk","servers","Object","keys","length","golds","strParams","search","has","endpointATMSuccess","paymentWalletChargeATMSuccess","textAlign","toLocaleString","style","currency","hasOwnProperty","map","itemValue","itemIndex","displayText","serverGroupIndex","width","serverValue","serverIndex","server_id","server_name","roleValue","roleIndex","roleName","goldItemValue","goldItemIndex","assetDomain","image","findIndex","item","gold"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\r\nimport '../assets/css/paytowallet.css'\r\n\r\nimport * as _ from 'lodash';\r\n\r\nimport api from '../utils/Api';\r\nimport apiConfig from '../config/ApiConfig';\r\nimport commonConfig from '../config/CommonConfig';\r\nimport Validate from \"../utils/Validate\";\r\n\r\nimport PayBreadcrumb from './PayBreadcrumb'\r\n\r\nexport default class Paytowallet extends Component {\r\n\r\n    /**\r\n     * Constructor\r\n     * @param props\r\n     * @created 2020-03-18 LongTHK\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            balance: 0,\r\n            game: {},\r\n            cardsList: commonConfig.CardsList,\r\n            atmValuesList: commonConfig.ATMValuesList,\r\n            serverGroups: [],\r\n            serversList: [],\r\n            goldsList: [],\r\n            isDisableSelectServers: true,\r\n            payItem: {},\r\n            inLoadingPage: false,\r\n            inProcessing: false,\r\n            processingResult: {\r\n                status: null,\r\n                message: ''\r\n            },\r\n            errors: {},\r\n            chargeGameItem: {},\r\n            chargeGameResult: {},\r\n            rolesList: null,\r\n            modalContent: ''\r\n        }\r\n    }\r\n\r\n    /**\r\n     * On component did mount event\r\n     * @created 2020-03-18 LongTHk\r\n     */\r\n    componentDidMount() {\r\n        // get md5\r\n        let md5 = require('md5');\r\n        // get username\r\n        let username = JSON.parse(localStorage.getItem('user')).data.username;\r\n        // get query string\r\n        let queryString = require('query-string');\r\n\r\n        // set inLoadingPage status\r\n        this.setState({\r\n            inLoadingPage: true\r\n        });\r\n\r\n        // call api get page content\r\n        let slug = this.props.match.match.params.slug;\r\n        let sign = md5(username + apiConfig.jwtToken);\r\n        let endPoint = apiConfig.domain + apiConfig.endpoint.getDetailGameToWallet + '?slug=' + slug + '&username=' + username + '&sign=' + sign;\r\n        api.call('GET', endPoint)\r\n            .then((response) => {\r\n                // get return data\r\n                let data = response.data.data;\r\n                // spit servers list into server groups\r\n                let serverGroups = _.chunk(data.servers, 10);\r\n                // set state\r\n                this.setState({\r\n                    username: username,\r\n                    balance: data.balance,\r\n                    game: Object.keys(data).length > 0 ? data.game[0] : null,\r\n                    serverGroups: serverGroups,\r\n                    goldsList: data.golds\r\n                });\r\n\r\n                // call api check Charging ATM status\r\n                let strParams = this.props.match.location.search;\r\n                let params = queryString.parse(strParams);\r\n                if (_.has(params, 'trans_id')) {\r\n                    let endpointATMSuccess = apiConfig.domain + apiConfig.endpoint.paymentWalletChargeATMSuccess + strParams;\r\n                    api.call('GET', endpointATMSuccess)\r\n                        .then((response) => {\r\n                            // set atm response message\r\n                            this.setState({\r\n                                modalContent: response.data.messages\r\n                            });\r\n\r\n                            // create modal\r\n                            let modal = window.$('.modal-notification');\r\n                            // modal close action\r\n                            modal.on('click', function () {\r\n                                modal.modal('hide')\r\n                            });\r\n\r\n                            // show modal\r\n                            modal.modal('show');\r\n                        })\r\n                        .catch((err) => {\r\n                            console.log(err)\r\n                        });\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n            })\r\n            .finally(() => {\r\n                // set inLoadingPage status\r\n                this.setState({\r\n                    inLoadingPage: false\r\n                });\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Action on server group changee\r\n     * @param event\r\n     * @crated 2020-03018 LongTHK\r\n     */\r\n    changeServerGroup = (event) => {\r\n        // get server group value\r\n        let serverGroupValue = event.target.value;\r\n\r\n        // load servers list base on group\r\n        if (serverGroupValue !== '') {\r\n            this.setState({\r\n                serversList: this.state.serverGroups[serverGroupValue],\r\n                isDisableSelectServers: false\r\n            })\r\n        } else {\r\n            this.setState({\r\n                isDisableSelectServers: true\r\n            })\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle changing input data\r\n     * @param event\r\n     * @created 2020-03-19 LongTHK\r\n     */\r\n    handleChange = (event) => {\r\n        const target = event.target;\r\n        const value = target.type === 'checkbox' ? target.checked : target.value;\r\n        const name = target.name;\r\n\r\n        this.setState(prevState => ({\r\n            payItem: {\r\n                ...prevState.payItem,\r\n                [name]: value\r\n            }\r\n        }))\r\n    };\r\n\r\n    /**\r\n     * Get role name\r\n     * @param event\r\n     */\r\n    handleServerChanged = (event) => {\r\n        // get md5\r\n        let md5 = require('md5');\r\n\r\n        // get params\r\n        let userId = JSON.parse(localStorage.getItem('user')).data.id;\r\n        let sign = md5(userId + apiConfig.jwtToken);\r\n        let serverId = event.target.value;\r\n\r\n        // define endpoint\r\n        let endPoint = apiConfig.domain + apiConfig.endpoint.getRole +\r\n            '?server_id=' + serverId +\r\n            '&id_user=' + userId +\r\n            '&productAgent=' + this.state.game.agent +\r\n            '&sign=' + sign;\r\n\r\n        // call api\r\n        api.call('GET', endPoint)\r\n            .then((response) => {\r\n                // get response data\r\n                let responseData = response.data;\r\n\r\n                // set roles list\r\n                if (responseData.status) {\r\n                    // get roles list\r\n                    let rolesList = responseData.data.role;\r\n\r\n                    // set roles list\r\n                    this.setState({\r\n                        rolesList: rolesList\r\n                    });\r\n\r\n                    // set charge game item\r\n                    this.setState({\r\n                        chargeGameItem: {\r\n                            serverId: serverId,\r\n                            roleId: rolesList[0].roleId\r\n                        }\r\n                    });\r\n                } else {\r\n                    // clear roles list\r\n                    this.setState({\r\n                        rolesList: []\r\n                    });\r\n\r\n                    // clear charge game item\r\n                    this.setState({\r\n                        chargeGameItem: {}\r\n                    })\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.log(error)\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Open charge game modal\r\n     * @param event\r\n     * @returns {Promise<void>}\r\n     */\r\n    openModal = (event) => {\r\n        // get gold id\r\n        let goldId = window.$(event.target).data('gold-id');\r\n\r\n        if (window.$(event.target).data('amount') > this.state.balance) {\r\n            // set state\r\n            this.setState({\r\n                modalContent: 'Không đủ số dư trong tài khoản, hãy chọn mệnh giá thấp hơn hoặc nạp thêm tiền vào ví để tiếp tục giao dịch'\r\n            });\r\n            // create modal\r\n            let modal = window.$('.modal-notification');\r\n            // modal close action\r\n            modal.on('click', function () {\r\n                modal.modal('hide')\r\n            });\r\n\r\n            // show modal\r\n            modal.modal('show');\r\n        } else {\r\n            // get gold id\r\n            this.setState(prevState => ({\r\n                chargeGameItem: {\r\n                    ...prevState.chargeGameItem,\r\n                    goldId: goldId\r\n                }\r\n            }));\r\n\r\n            // create modal\r\n            let modal = window.$('.modal-confirm');\r\n            // modal close action\r\n            modal.on('hidden.bs.modal', function () {\r\n                this.setState({\r\n                    chargeGameResult: {}\r\n                })\r\n            }.bind(this));\r\n\r\n            // show modal\r\n            modal.modal('show');\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Action on change role\r\n     * @param event\r\n     */\r\n    changeRoleId = (event) => {\r\n        this.setState(prevState => ({\r\n            chargeGameItem: {\r\n                ...prevState,\r\n                roleId: event.target.value\r\n            }\r\n        }))\r\n    };\r\n\r\n    /**\r\n     * Charge game\r\n     * @param event\r\n     */\r\n    chargeGame = (event) => {\r\n        // stop propagation\r\n        event.stopPropagation();\r\n\r\n        // get md5\r\n        let md5 = require('md5');\r\n\r\n        // create end point\r\n        let endPoint = apiConfig.domain + apiConfig.endpoint.payToGame +\r\n            '?roleId=' + this.state.chargeGameItem.roleId +\r\n            '&goldId=' + this.state.chargeGameItem.goldId +\r\n            '&username=' + this.state.username +\r\n            '&productAgent=' + this.state.game.agent +\r\n            '&serverId=' + this.state.chargeGameItem.serverId +\r\n            '&sign=' + md5(this.state.username + apiConfig.jwtToken);\r\n\r\n        // call api\r\n        api.call('GET', endPoint)\r\n            .then((response) => {\r\n                // get response data\r\n                let responseData = response.data;\r\n\r\n                // set state\r\n                this.setState({\r\n                    chargeGameResult: {\r\n                        status: responseData.status,\r\n                        message: responseData.messages\r\n                    }\r\n                });\r\n            })\r\n            .catch((err) => {\r\n                console.log('err');\r\n            })\r\n    };\r\n\r\n    /**\r\n     * Change pay item\r\n     * @param payType\r\n     * @created 2020-03-19 LongTHK\r\n     */\r\n    changePayItem = (payType) => {\r\n        switch (payType) {\r\n            case 'card':\r\n                this.setState({\r\n                    payItem: {\r\n                        cardType: '',\r\n                        serie: '',\r\n                        number: ''\r\n                    }\r\n                });\r\n                break;\r\n            case 'atm':\r\n                this.setState({\r\n                    payItem: {\r\n                        amount: '',\r\n                    }\r\n                });\r\n                break;\r\n            default :\r\n                this.setState({\r\n                    payItem: {\r\n                        cardType: '',\r\n                        serie: '',\r\n                        number: ''\r\n                    }\r\n                });\r\n        }\r\n\r\n        // push value to pay item\r\n        this.setState(prevState => ({\r\n            payItem: {\r\n                ...prevState.payItem,\r\n                username: this.state.username,\r\n                productAgent: this.state.game.agent\r\n            }\r\n        }));\r\n\r\n        // reset error\r\n        this.setState({\r\n            errors: {}\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Pay by card\r\n     * @created 2020-03-19 LongTHk\r\n     */\r\n    payByCard = async () => {\r\n        // reset error\r\n        this.setState({\r\n            errors: {}\r\n        });\r\n\r\n        if (await this.validatePayByCard()) {\r\n            // set inProcessing mode\r\n            this.setState({\r\n                inProcessing: true\r\n            });\r\n            // get md5\r\n            const md5 = require('md5');\r\n            // get pay item\r\n            const payItem = this.state.payItem;\r\n\r\n            // generate endpoint\r\n            const endPoint = apiConfig.domain + apiConfig.endpoint.paymentWalletChargeCard +\r\n                '?serial=' + payItem.serie +\r\n                '&code=' + payItem.number +\r\n                '&username=' + payItem.username +\r\n                '&productAgent=' + payItem.productAgent +\r\n                '&type=' + payItem.cardType +\r\n                '&sign=' + md5(payItem.username + apiConfig.jwtToken);\r\n\r\n            // call api\r\n            api.call('GET', endPoint)\r\n                .then((response) => {\r\n                    // get response data\r\n                    let responseData = response.data;\r\n\r\n                    // set state\r\n                    if (responseData.status) {\r\n                        this.setState({\r\n                            balance: responseData.data.balance,\r\n                            processingResult: {\r\n                                status: true,\r\n                                message: responseData.messages\r\n                            }\r\n                        });\r\n                    } else {\r\n                        this.setState({\r\n                            processingResult: {\r\n                                status: false,\r\n                                message: responseData.messages\r\n                            }\r\n                        })\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err)\r\n                })\r\n                .finally(() => {\r\n                    // release inProcessing mode\r\n                    this.setState({\r\n                        inProcessing: false\r\n                    });\r\n                });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Pay by ATM\r\n     * @created 2020-03-19 LongTHk\r\n     */\r\n    payByATM = async () => {\r\n        // reset error\r\n        this.setState({\r\n            errors: {}\r\n        });\r\n\r\n        if (await this.validatePayByATM()) {\r\n            // set inProcessing mode\r\n            this.setState({\r\n                inProcessing: true\r\n            });\r\n            // get md5\r\n            const md5 = require('md5');\r\n            // get pay item\r\n            const payItem = this.state.payItem;\r\n\r\n            // generate endpoint\r\n            const endPoint = apiConfig.domain + apiConfig.endpoint.paymentWalletChargeATM +\r\n                '?username=' + payItem.username +\r\n                '&productAgent=' + payItem.productAgent +\r\n                '&amount=' + payItem.amount +\r\n                '&sign=' + md5(payItem.username + apiConfig.jwtToken);\r\n\r\n            // call api\r\n            api.call('GET', endPoint)\r\n                .then((response) => {\r\n                    window.location.href = response.data.data.link;\r\n                })\r\n                .catch((err) => {\r\n                    // release inProcessing mode\r\n                    this.setState({\r\n                        inProcessing: false\r\n                    });\r\n                    console.log(err)\r\n                });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Validate Pay by card input\r\n     * @returns {Promise<boolean>}\r\n     * @created 2020-03-19 LongTHK\r\n     */\r\n    validatePayByCard = async () => {\r\n        // define valid status\r\n        let isValid = true;\r\n        // define errors\r\n        let errors = {};\r\n\r\n        // check card type\r\n        if (Validate.isRequired(this.state.payItem.cardType)) {\r\n            errors.cardType = 'Vui lòng chọn loại thẻ';\r\n            isValid = false;\r\n        }\r\n        // check serie\r\n        if (Validate.isRequired(this.state.payItem.serie)) {\r\n            errors.serie = 'Vui lòng nhập số seri';\r\n            isValid = false;\r\n        }\r\n        if (Validate.maxLength(this.state.payItem.serie, 20)) {\r\n            errors.serie = 'Seri tối đa 20 ký tự';\r\n            isValid = false;\r\n        }\r\n        if (Validate.minLength(this.state.payItem.serie, 6)) {\r\n            errors.serie = 'Seri tối thiểu 6 ký tự';\r\n            isValid = false;\r\n        }\r\n        // check number\r\n        if (Validate.isRequired(this.state.payItem.number)) {\r\n            errors.number = 'Vui lòng nhập mã thẻ';\r\n            isValid = false;\r\n        }\r\n        if (Validate.maxLength(this.state.payItem.number, 20)) {\r\n            errors.number = 'Mã thẻ tối đa 20 ký tự';\r\n            isValid = false;\r\n        }\r\n        if (Validate.minLength(this.state.payItem.number, 6)) {\r\n            errors.number = 'Mã thẻ tối thiểu 6 ký tự';\r\n            isValid = false;\r\n        }\r\n        // set errors\r\n        await this.setState({\r\n            errors: errors\r\n        });\r\n\r\n        return isValid;\r\n    };\r\n\r\n    /**\r\n     * Validate Pay by ATM input\r\n     * @returns {Promise<boolean>}\r\n     * @created 2020-03-19 LongTHk\r\n     */\r\n    validatePayByATM = async () => {\r\n        // define valid status\r\n        let isValid = true;\r\n        // define errors\r\n        let errors = {};\r\n\r\n        // check amount\r\n        if (Validate.isRequired(this.state.payItem.amount)) {\r\n            errors.amount = 'Vui lòng chọn số tiền nạp';\r\n            isValid = false;\r\n        }\r\n\r\n        // set errors\r\n        await this.setState({\r\n            errors: errors\r\n        });\r\n\r\n        return isValid;\r\n    };\r\n\r\n    /**\r\n     * Render layout\r\n     * @returns {*}\r\n     * @created 2020-03-18 LongTHK\r\n     */\r\n    render() {\r\n        /**\r\n         * Loading page animation\r\n         */\r\n        if (this.state.inLoadingPage) {\r\n            return (\r\n                <div style={{textAlign: \"center\"}}>\r\n                    <div className=\"lds-dual-ring\"></div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        /**\r\n         * Render in case game not found\r\n         */\r\n        if (this.state.game === null) {\r\n            return (\r\n                <div>\r\n                    <h1 className='text-center'>Không tìm thấy game</h1>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        /**\r\n         * Page render\r\n         */\r\n        return (\r\n            <div className=\"container paytowallet_container\">\r\n                <div className=\"row box\">\r\n                    <PayBreadcrumb match={this.props.match.match}></PayBreadcrumb>\r\n                    <form method=\"POST\" name=\"napgold\" id=\"napgold\" noValidate=\"novalidate\">\r\n                        <h2>{this.state.game.name}</h2>\r\n                        <div className=\"qa-message-list\" id=\"wallmessages\">\r\n                            <div className=\"message-item\" id=\"accRole\">\r\n                                <div className=\"message-inner\">\r\n                                    <div className=\"message-head clearfix handle-acc-role\">\r\n                                        <div className=\"user-detail\">\r\n                                            <h5 className=\"handle\">Tài khoản : {this.state.username}</h5>\r\n                                            <h6 className=\"handle\">Số dư : {this.state.balance.toLocaleString('it-IT', {style : 'currency', currency : 'VND'})}</h6>\r\n                                            <input type=\"hidden\" defaultValue={0} name=\"balance\"/>\r\n                                            <input type=\"hidden\" defaultValue={771866} name=\"id_user\" id=\"id_user\"/>\r\n                                            <input type=\"hidden\" defaultValue={0} name=\"amount\" id=\"amount\"/>\r\n                                            <input type=\"hidden\" defaultValue={0} name=\"gold_id\" id=\"gold_id\"/>\r\n                                            <input type=\"hidden\" defaultValue name=\"theThang\" id=\"theThang\"/>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"message-item\" id=\"accType\">\r\n                                <div className=\"message-inner\">\r\n                                    <div className=\"message-head clearfix\">\r\n                                        <div className=\"user-detail\">\r\n                                            <h5 className=\"handle\">Chọn phương thức để nạp tiền vào ví</h5>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"qa-message-content\">\r\n                                        <div className=\"collapse-group\" id=\"accordion\">\r\n                                            <div className=\"panel panel-default\">\r\n                                                <div className=\"panel-heading\" role=\"tab\" id=\"headingOne\">\r\n                                                    <h4 className=\"panel-title\">\r\n                                                        <a role=\"button\" data-toggle=\"collapse\" href=\"#collapseOne\"\r\n                                                           onClick={this.changePayItem.bind(window.event, 'card')}\r\n                                                           data-parent=\"#accordion\"\r\n                                                           aria-expanded=\"true\" aria-controls=\"collapseOne\"\r\n                                                           className=\"trigger collapsed\">\r\n                                                            Thẻ cào\r\n                                                        </a>\r\n                                                    </h4>\r\n                                                </div>\r\n                                                <div id=\"collapseOne\" className=\"panel-collapse collapse\"\r\n                                                     role=\"tabpanel\"\r\n                                                     aria-labelledby=\"headingOne\" data-id=\"Thẻ cào\">\r\n                                                    <div className=\"panel-body\">\r\n                                                        <div className=\"tab-pane active\" id=\"tab_card_pay\">\r\n                                                            <label htmlFor=\"in_type\"\r\n                                                                   className=\"col-sm-12 controll-label\">\r\n                                                                <span>Loại thẻ</span>\r\n                                                                {\r\n                                                                    this.state.errors.hasOwnProperty('cardType') &&\r\n                                                                    <span\r\n                                                                        className=\"input-error\">{this.state.errors.cardType}</span>\r\n                                                                }\r\n                                                                <select name=\"cardType\" className=\"form-control valid\"\r\n                                                                        aria-invalid=\"false\"\r\n                                                                        onChange={this.handleChange}\r\n                                                                        onBlur={this.validatePayByCard}\r\n                                                                >\r\n                                                                    <option value=\"\">Chọn loại thẻ</option>\r\n                                                                    {\r\n                                                                        _.map(this.state.cardsList, (itemValue, itemIndex) =>\r\n                                                                            <option key={itemIndex}\r\n                                                                                    value={itemValue.type}>{itemValue.name}</option>\r\n                                                                        )\r\n                                                                    }\r\n                                                                </select>\r\n                                                            </label>\r\n                                                            <label htmlFor=\"in_serie\"\r\n                                                                   className=\"col-sm-12 controll-label\">\r\n                                                                <span>Số serie</span>\r\n                                                                {\r\n                                                                    this.state.errors.hasOwnProperty('serie') &&\r\n                                                                    <span\r\n                                                                        className=\"input-error\">{this.state.errors.serie}</span>\r\n                                                                }\r\n                                                                <input type=\"text\" name=\"serie\"\r\n                                                                       className=\"form-control\"\r\n                                                                       onChange={this.handleChange}\r\n                                                                       onBlur={this.validatePayByCard}\r\n                                                                       />\r\n                                                            </label>\r\n                                                            <label htmlFor=\"in_pin\"\r\n                                                                   className=\"col-sm-12 controll-label\">\r\n                                                                <span>Mã thẻ</span>\r\n                                                                {\r\n                                                                    this.state.errors.hasOwnProperty('number') &&\r\n                                                                    <span\r\n                                                                        className=\"input-error\">{this.state.errors.number}</span>\r\n                                                                }\r\n                                                                <input type=\"text\" name=\"number\"\r\n                                                                       className=\"form-control\"\r\n                                                                       onChange={this.handleChange}\r\n                                                                       onBlur={this.validatePayByCard}\r\n                                                                       />\r\n                                                            </label>\r\n                                                            <button className=\"btn btn-info\" id=\"btnXacnhan\"\r\n                                                                    type={\"button\"}\r\n                                                                    data-id=\"the-cao\"\r\n                                                                    onClick={this.payByCard}\r\n                                                                    disabled={this.state.inProcessing}>\r\n                                                                {\r\n                                                                    !this.state.inProcessing &&\r\n                                                                    <span>Thanh toán</span>\r\n                                                                }\r\n                                                                {\r\n                                                                    this.state.inProcessing &&\r\n                                                                    <div className={'dot-loader'}>\r\n                                                                        <div></div>\r\n                                                                        <div></div>\r\n                                                                        <div></div>\r\n                                                                        <div></div>\r\n                                                                        <div></div>\r\n                                                                    </div>\r\n                                                                }\r\n                                                            </button>\r\n                                                            {\r\n                                                                (\r\n                                                                    this.state.processingResult.status !== null &&\r\n                                                                    !this.state.processingResult.status &&\r\n                                                                    <span\r\n                                                                        className=\"message-alert\">{this.state.processingResult.message}</span>\r\n                                                                ) ||\r\n                                                                (\r\n                                                                    this.state.processingResult.status !== null &&\r\n                                                                    this.state.processingResult.status &&\r\n                                                                    <span\r\n                                                                        className=\"message-success\">{this.state.processingResult.message}</span>\r\n                                                                )\r\n                                                            }\r\n                                                            <div className=\"clearfix\"/>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"panel panel-default\">\r\n                                                <div className=\"panel-heading\" role=\"tab\" id=\"headingTwo\">\r\n                                                    <h4 className=\"panel-title\">\r\n                                                        <a role=\"button\" data-toggle=\"collapse\" href=\"#collapseTwo\"\r\n                                                           data-parent=\"#accordion\"\r\n                                                           onClick={this.changePayItem.bind(window.event, 'atm')}\r\n                                                           aria-expanded=\"true\" aria-controls=\"collapseTwo\"\r\n                                                           className=\"trigger collapsed\">\r\n                                                            Thẻ ATM/Nội địa/NAPAS\r\n                                                        </a>\r\n                                                    </h4>\r\n                                                </div>\r\n                                                <div id=\"collapseTwo\" className=\"panel-collapse collapse\"\r\n                                                     role=\"tabpanel\"\r\n                                                     aria-labelledby=\"headingTwo\" data-id=\"Thẻ ATM/Nội địa/NAPAS\">\r\n                                                    <div className=\"panel-body\">\r\n                                                        <div id=\"tab_card_pay\">\r\n                                                            <label htmlFor=\"amount_pay\"\r\n                                                                   className=\"col-sm-12 controll-label\">\r\n                                                                <span>Số tiền thanh toán (VNĐ)</span>\r\n                                                                {\r\n                                                                    this.state.errors.hasOwnProperty('amount') &&\r\n                                                                    <span\r\n                                                                        className=\"input-error\">{this.state.errors.amount}</span>\r\n                                                                }\r\n                                                                <select name=\"amount\" className=\"form-control\"\r\n                                                                        onChange={this.handleChange} onBlur={this.validatePayByATM}>\r\n                                                                    <option value=\"\">Chọn số tiền</option>\r\n                                                                    {\r\n                                                                        _.map(this.state.atmValuesList, (itemValue, itemIndex) =>\r\n                                                                            <option key={itemIndex}\r\n                                                                                    value={itemValue.value}>{itemValue.displayText}</option>\r\n                                                                        )\r\n                                                                    }\r\n                                                                </select>\r\n                                                            </label>\r\n                                                            <button className=\"btn btn-info\" id=\"btnXacnhan\"\r\n                                                                    type={\"button\"} data-id=\"the-atm\"\r\n                                                                    onClick={this.payByATM}\r\n                                                                    disabled={this.state.inProcessing}>\r\n                                                                {\r\n                                                                    !this.state.inProcessing &&\r\n                                                                    <span>Thanh toán</span>\r\n                                                                }\r\n                                                                {\r\n                                                                    this.state.inProcessing &&\r\n                                                                    <div className={'dot-loader'}>\r\n                                                                        <div></div>\r\n                                                                        <div></div>\r\n                                                                        <div></div>\r\n                                                                        <div></div>\r\n                                                                        <div></div>\r\n                                                                    </div>\r\n                                                                }\r\n                                                            </button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"message-alert\">NẠP HPCODE = 100% ; GATE = 100% ; VCOIN = 90% ; ATM =\r\n                                        100% (Thẻ HPCode có\r\n                                        bán ở các cửa hàng của Payoo &amp; bán online tại Website Napthegame.net )\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"message-item\" id=\"accGetRole\">\r\n                                <div className=\"message-inner\">\r\n                                    <div className=\"message-head clearfix\">\r\n                                        <div className=\"user-detail\">\r\n                                            <h5 className=\"handle\">Chọn server để nạp tiền vào game</h5>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"qa-message-content content_server\">\r\n                                        <div className=\"divserverList\">\r\n                                            <input type=\"hidden\" name=\"agent\" id=\"agent\" defaultValue=\"m002\"/>\r\n                                            <label htmlFor=\"server_group\" className=\"col-sm-12 controll-label\">\r\n                                                Chọn cụm máy chủ:\r\n                                            </label>\r\n                                            <select name=\"server_group\" className=\"form-control \"\r\n                                                    id=\"server_group\"\r\n                                                    onChange={this.changeServerGroup}\r\n                                            >\r\n                                                <option value=\"\">Chọn group server</option>\r\n                                                {\r\n                                                    _.map(this.state.serverGroups, (serverGroupValue, serverGroupIndex) =>\r\n                                                        <option key={serverGroupIndex} value={serverGroupIndex}>\r\n                                                            Cụm máy\r\n                                                            chủ {serverGroupIndex * 10 + 1} - {serverGroupIndex * 10 + 10}\r\n                                                        </option>\r\n                                                    )\r\n                                                }\r\n                                            </select>\r\n                                            <label htmlFor=\"server_list\" className=\"col-sm-12 controll-label\"\r\n                                                   style={{width: 'auto'}}>\r\n                                                Chọn server:\r\n                                            </label>\r\n                                            <select name=\"server_id\" className=\"form-control \"\r\n                                                    id=\"server_list\"\r\n                                                    disabled={this.state.isDisableSelectServers}\r\n                                                    onChange={this.handleServerChanged}\r\n                                            >\r\n                                                <option value=\"\">Chọn server</option>\r\n                                                {\r\n                                                    _.map(this.state.serversList, (serverValue, serverIndex) =>\r\n                                                        <option key={serverIndex} value={serverValue.server_id}>\r\n                                                            {serverValue.server_name}\r\n                                                        </option>\r\n                                                    )\r\n                                                }\r\n                                            </select>\r\n                                        </div>\r\n                                        <div id=\"appentHtml\">\r\n                                            <label htmlFor=\"server_list\"\r\n                                                   className=\"col-sm-12 controll-label\"\r\n                                                   style={{width: 'auto'}}>&nbsp;\r\n                                            </label>\r\n                                            {\r\n                                                this.state.rolesList !== null &&\r\n                                                this.state.rolesList.length > 0 &&\r\n                                                <div>\r\n                                                    <select name=\"rolesList\" className=\"form-control \"\r\n                                                            id=\"server_list\" onChange={this.changeRoleId}>\r\n                                                        {\r\n                                                            _.map(this.state.rolesList, (roleValue, roleIndex) =>\r\n                                                                <option key={roleIndex}\r\n                                                                        value={roleValue.roleId}>{roleValue.roleName}</option>\r\n                                                            )\r\n                                                        }\r\n                                                    </select>\r\n                                                </div>\r\n                                            }\r\n                                            {\r\n                                                this.state.rolesList !== null &&\r\n                                                this.state.rolesList.length === 0 &&\r\n                                                <div className=\"role-name\">\r\n                                                    Không tìm thấy nhân vật game\r\n                                                </div>\r\n                                            }\r\n                                        </div>\r\n                                        <div className=\"clearfix\"/>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            {\r\n                                this.state.rolesList !== null &&\r\n                                this.state.rolesList.length > 0 &&\r\n                                <div className=\"message-item\" id=\"accRang\">\r\n                                    <div className=\"message-inner\">\r\n                                        <div className=\"message-head clearfix\">\r\n                                            <div className=\"user-detail\">\r\n                                                <h5 className=\"handle\">Chọn gói vật phẩm</h5>\r\n                                                <p className=\"tab\" id=\"coingold\">Gói Nguyên Bảo</p>\r\n                                                <p className=\"tab\" id=\"coingift\">Gói Quà Đặc Biệt</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"qa-message-content\">\r\n                                            <div className=\"form-group resultCoin\">\r\n                                                <div id=\"showcoingold\">\r\n                                                    {\r\n                                                        _.map(this.state.goldsList, (goldItemValue, goldItemIndex) =>\r\n                                                            <div className=\"gold-item\" key={goldItemIndex}>\r\n                                                                <img\r\n                                                                    src={commonConfig.assetDomain + goldItemValue.image}\r\n                                                                    data-amount={goldItemValue.amount}\r\n                                                                    data-gold-id={goldItemValue.id}\r\n                                                                    onClick={this.openModal}\r\n                                                                />\r\n                                                            </div>\r\n                                                        )\r\n                                                    }\r\n                                                </div>\r\n                                                <div id=\"showcoingift\"/>\r\n                                            </div>\r\n                                            <div className=\"clearfix\"/>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            }\r\n                            <div id=\"myModal\" className=\"modal\">\r\n                                <div className=\"modal-content clearfix\">\r\n                                    <h1>Xác nhận giao dịch</h1>\r\n                                    <input type=\"submit\" name=\"submit\" id=\"submitbutton\"\r\n                                           className=\"col-sm-3 btn btn-primary\"\r\n                                           defaultValue=\"Thanh toán\"/>\r\n                                    <div className=\"clearfix\"/>\r\n                                    <span className=\"close btn-danger\">Chấp nhận</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n\r\n                <div className=\"modal modal-notification fade\" tabIndex=\"-1\" role=\"dialog\" data-backdrop=\"false\">\r\n                    <div className=\"modal-dialog\" role=\"document\">\r\n                        <div className=\"modal-content\">\r\n                            <div className=\"modal-body\">\r\n                                <p className={\"text-center\"}>{this.state.modalContent}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"modal modal-confirm fade\" tabIndex=\"-1\" role=\"dialog\" data-backdrop=\"false\">\r\n                    <div className=\"modal-dialog\" role=\"document\">\r\n                        <div className=\"modal-content\">\r\n                            {\r\n                                Object.keys(this.state.chargeGameItem).length > 0 &&\r\n                                <div className=\"modal-body\">\r\n                                    <p>\r\n                                        <b>Server:</b>&nbsp;\r\n                                        {\r\n                                            this.state.serversList[_.findIndex(this.state.serversList, function (item) {\r\n                                                return item.server_id === this.state.chargeGameItem.serverId\r\n                                            }.bind(this))].server_name\r\n                                        }\r\n                                    </p>\r\n                                    {\r\n                                        this.state.chargeGameItem.hasOwnProperty('goldId') &&\r\n                                        <p>\r\n                                            <b>Gói nạp:</b>&nbsp;\r\n                                            {\r\n                                                this.state.goldsList[_.findIndex(this.state.goldsList, function (item) {\r\n                                                    return item.id === this.state.chargeGameItem.goldId\r\n                                                }.bind(this))].gold\r\n                                            }\r\n                                        </p>\r\n                                    }\r\n                                    <p>\r\n                                        <b>Số dư hiện tại:</b>&nbsp;{ this.state.balance.toLocaleString('it-IT', {style : 'currency', currency : 'VND'}) }\r\n                                    </p>\r\n                                    {\r\n                                        this.state.chargeGameItem.hasOwnProperty('goldId') &&\r\n                                        <p>\r\n                                            <b>Số tiền cần thành toán:</b>&nbsp;\r\n                                            {\r\n                                                this.state.goldsList[_.findIndex(this.state.goldsList, function (item) {\r\n                                                    return item.id === this.state.chargeGameItem.goldId\r\n                                                }.bind(this))].amount.toLocaleString('it-IT', {style : 'currency', currency : 'VND'})\r\n                                            }\r\n                                        </p>\r\n                                    }\r\n                                    {\r\n                                        this.state.chargeGameItem.hasOwnProperty('goldId') &&\r\n                                        <p>\r\n                                            <b>Số dư còn lại:</b>&nbsp;\r\n                                            {\r\n                                                (this.state.balance - this.state.goldsList[_.findIndex(this.state.goldsList, function (item) {\r\n                                                    return item.id === this.state.chargeGameItem.goldId\r\n                                                }.bind(this))].amount).toLocaleString('it-IT', {style : 'currency', currency : 'VND'})\r\n                                            }\r\n                                        </p>\r\n                                    }\r\n                                </div>\r\n                            }\r\n                            <div className=\"modal-footer\">\r\n                                <div\r\n                                    className={(this.state.chargeGameResult.status !== 0) ? 'text-center text-success' : 'text-center text-danger'}>\r\n                                    {this.state.chargeGameResult.message}\r\n                                </div>\r\n                                <button type={\"button\"} className=\"btn btn-primary\" onClick={this.chargeGame}>Nạp vào\r\n                                    game\r\n                                </button>\r\n                                <button type={\"button\"} className=\"btn btn-danger\" data-dismiss=\"modal\">Đóng</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}