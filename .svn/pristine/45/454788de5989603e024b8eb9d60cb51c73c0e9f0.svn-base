{"ast":null,"code":"var _jsxFileName = \"C:\\\\reactjs\\\\payv2\\\\myapp\\\\src\\\\components\\\\FacebookLogin.js\";\nimport React, { Component } from 'react';\nimport SocialConfig from '../config/SocialConfig';\nimport { connect } from \"react-redux\";\nimport loginAction from '../actions/login.actions';\nimport loginReducer from '../reducers/login.reducer';\n\nclass FacebookLogin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.callApi = e => {\n      return console.log(this.state);\n    };\n\n    this.handleClick = e => {\n      e.preventDefault(); // this.props.facebookLogin(this.state.accessToken);\n\n      window.FB.getLoginStatus(function (response) {\n        if (response.status !== 'connected') {\n          window.FB.login();\n        } else {\n          this.callApi();\n        }\n      });\n    };\n\n    this.state = {\n      accessToken: ''\n    };\n  }\n\n  componentDidMount() {\n    window.fbAsyncInit = function () {\n      window.FB.init({\n        appId: SocialConfig.fb.app_id,\n        false: true,\n        // enable cookies to allow the server to access\n        xfbml: true,\n        // parse social plugins on this page\n        version: 'v6.0' // use version 2.1\n\n      });\n      window.FB.Event.subscribe('auth.statusChange', function (response) {\n        if (response.authResponse && response.status === \"connected\") {\n          this.setState({\n            accessToken: response.authResponse.accessToken\n          });\n        }\n      }.bind(this));\n    }.bind(this); // Load the SDK asynchronously\n\n\n    (function (d, s, id) {\n      var js,\n          fjs = d.getElementsByTagName(s)[0];\n      if (d.getElementById(id)) return;\n      js = d.createElement(s);\n      js.id = id;\n      js.src = \"//connect.facebook.net/en_US/sdk.js\";\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, 'script', 'facebook-jssdk');\n  }\n\n  render() {\n    return React.createElement(\"a\", {\n      href: \"/#\",\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row-login\",\n      id: \"btnFacebook\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-facebook\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"\\u0110\\u0103ng nh\\u1EADp b\\u1EB1ng Facebook\")));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    login: state.loginReducer\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n    facebookLogin: token => {\n      console.log(token);\n      dispatch(loginAction.getBussinessToken(token));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FacebookLogin);","map":{"version":3,"sources":["C:/reactjs/payv2/myapp/src/components/FacebookLogin.js"],"names":["React","Component","SocialConfig","connect","loginAction","loginReducer","FacebookLogin","constructor","props","callApi","e","console","log","state","handleClick","preventDefault","window","FB","getLoginStatus","response","status","login","accessToken","componentDidMount","fbAsyncInit","init","appId","fb","app_id","false","xfbml","version","Event","subscribe","authResponse","setState","bind","d","s","id","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","render","mapStateToProps","mapDispatchToProps","dispatch","facebookLogin","token","getBussinessToken"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport SocialConfig from '../config/SocialConfig';\r\nimport { connect } from \"react-redux\";\r\nimport loginAction from '../actions/login.actions';\r\nimport loginReducer from '../reducers/login.reducer';\r\n\r\nclass FacebookLogin extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            accessToken : '',\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.fbAsyncInit = function () {\r\n            window.FB.init({\r\n                appId: SocialConfig.fb.app_id,\r\n                false: true,  // enable cookies to allow the server to access\r\n                xfbml: true,  // parse social plugins on this page\r\n                version: 'v6.0' // use version 2.1\r\n            });\r\n\r\n            window.FB.Event.subscribe('auth.statusChange', function(response) {\r\n                if (response.authResponse && response.status === \"connected\") {\r\n                    this.setState({\r\n                        accessToken: response.authResponse.accessToken\r\n                    })\r\n                }\r\n            }.bind(this));\r\n        }.bind(this);\r\n\r\n        // Load the SDK asynchronously\r\n        (function (d, s, id) {\r\n            var js, fjs = d.getElementsByTagName(s)[0];\r\n            if (d.getElementById(id)) return;\r\n            js = d.createElement(s); js.id = id;\r\n            js.src = \"//connect.facebook.net/en_US/sdk.js\";\r\n            fjs.parentNode.insertBefore(js, fjs);\r\n        }(document, 'script', 'facebook-jssdk'));\r\n    }\r\n\r\n    callApi = (e) => {\r\n        return console.log(this.state);\r\n    }\r\n\r\n    handleClick = (e) => {\r\n        e.preventDefault();\r\n        // this.props.facebookLogin(this.state.accessToken);\r\n        window.FB.getLoginStatus(function (response) {\r\n            if(response.status !== 'connected'){\r\n                window.FB.login();\r\n            }else{\r\n                this.callApi();\r\n            }\r\n        })\r\n    }\r\n\r\n    \r\n\r\n    render() {\r\n        return (\r\n            <a href=\"/#\" onClick={this.handleClick}>\r\n                <div className=\"row-login\" id=\"btnFacebook\">\r\n                    <i className=\"fa fa-facebook\" aria-hidden=\"true\" />\r\n                    <p>Đăng nhập bằng Facebook</p>\r\n                </div>\r\n            </a>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        login: state.loginReducer\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, props) => {\r\n    return {\r\n        facebookLogin: (token) => {\r\n            console.log(token)\r\n            dispatch(loginAction.getBussinessToken(token))\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(FacebookLogin);"]},"metadata":{},"sourceType":"module"}