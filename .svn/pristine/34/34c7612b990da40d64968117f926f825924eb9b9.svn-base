{"ast":null,"code":"import _defineProperty from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\reactjs\\\\payv2\\\\pay-v2.phoeniz.com\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{connect}from'react-redux';import\"../assets/css/paytogame.css\";import gameActions from\"../actions/games.actions\";import paymentActions from\"../actions/payment.actions\";import Validate from\"../utils/Validate\";import{withRouter}from'react-router-dom';import*as _ from'lodash';var Paytogame=/*#__PURE__*/function(_Component){_inherits(Paytogame,_Component);function Paytogame(props){var _this;_classCallCheck(this,Paytogame);_this=_possibleConstructorReturn(this,_getPrototypeOf(Paytogame).call(this,props));_this.handlePayByCard=function(e){e.preventDefault();if(_this.validatePayCard()){_this.props.chargeCard(_this.state);}};_this.handlePayByATM=function(e){e.preventDefault();if(_this.validatePayAtm()){_this.props.chargeAtm(_this.state);}};_this.validatePayCard=function(){var _this$state=_this.state,sltServer=_this$state.sltServer,sltCardType=_this$state.sltCardType,txtSerie=_this$state.txtSerie,txtCardPin=_this$state.txtCardPin;var errorsCard={sltServer:[],sltCardType:[],txtSerie:[],txtCardPin:[],sltAmount:[]};var errorSelectServer=[];var errorSelectRole=[];var isValid=true;if(Validate.isRequired(sltServer)){errorSelectServer.push('Vui lòng chọn server');isValid=false;}if(Validate.isRequired(sltCardType)){errorsCard.sltCardType.push('Vui lòng chọn loại thẻ');isValid=false;}if(Validate.isRequired(txtSerie)){errorsCard.txtSerie.push('Series bắt buộc nhập');isValid=false;}if(Validate.minLength(txtSerie,6)){errorsCard.txtSerie.push('Series tối thiểu 6 ký tự');isValid=false;}if(Validate.maxLength(txtSerie,20)){errorsCard.txtSerie.push('Series đa  20 ký tự');isValid=false;}if(Validate.isRequired(txtCardPin)){errorsCard.txtCardPin.push('Mã thẻ bắt buộc nhập');isValid=false;}if(Validate.minLength(txtCardPin,6)){errorsCard.txtCardPin.push('Mã thẻ tối thiểu 6 ký tự');isValid=false;}if(Validate.maxLength(txtCardPin,20)){errorsCard.txtCardPin.push('Mã thẻ đa 20 ký tự');isValid=false;}if(_this.state.sltRoleId===''){errorSelectRole.push('không tìm thấy nhân vật');isValid=false;}_this.setState({errorsCard:errorsCard,errorSelectServer:errorSelectServer,errorSelectRole:errorSelectRole});return isValid;};_this.validatePayAtm=function(){var _this$state2=_this.state,sltServer=_this$state2.sltServer,sltAmount=_this$state2.sltAmount;var errorsAtm={sltServer:[],sltAmount:[]};var errorSelectServer=[];var errorSelectRole=[];var isValid=true;if(Validate.isRequired(sltServer)){errorSelectServer.push('Vui lòng chọn server');isValid=false;}if(Validate.isRequired(sltAmount)){errorsAtm.sltAmount.push('Vui lòng chọn mệnh giá');isValid=false;}if(_this.state.sltRoleId===''){errorSelectRole.push('không tìm thấy nhân vật');isValid=false;}_this.setState({errorsAtm:errorsAtm,errorSelectServer:errorSelectServer,errorSelectRole:errorSelectRole});return isValid;};_this.hanleGetRole=function(event){var target=event.target;var serverId=target.value;if(serverId!==''){_this.props.getUserRole(serverId,JSON.parse(localStorage.getItem('user')).data.id,_this.state.gameInfo.agent);}_this.setState({sltServer:serverId});};_this.handleChange=function(event){var target=event.target;var value=target.type==='checkbox'?target.checked:target.value;var name=target.name;_this.setState(_defineProperty({},name,value));};_this.state={username:JSON.parse(localStorage.getItem('user')).data.username,userRole:{},sltRoleId:'',sltServer:'',sltCardType:'',txtSerie:'',txtCardPin:'',sltAmount:'',gameInfo:{},chargeSuccessMSG:'',errorsAtm:[],errorsCard:[],errorSelectServer:[],errorSelectRole:[]};return _this;}_createClass(Paytogame,[{key:\"componentDidMount\",value:function componentDidMount(){var match=this.props.match;this.props.getDetailGameToGame(match.params.id);var queryString=require('query-string');var strParams=this.props.location.search;var params=queryString.parse(strParams);if(_.has(params,'trans_id')){this.props.chargeAtmSuccess(strParams);console.log(this.props);if(this.props.paymentReducer.chargeAtmSuccess.messages!==null){var modalATMReport=window.$('.modal-atm-report');modalATMReport.modal('show');modalATMReport.on('click',function(){modalATMReport.modal('hide');});}}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps,previousState){if(Object.keys(previousState.gameInfo).length===0){var gameData=previousProps.gamesReducer.data;for(var key in gameData){if(gameData.hasOwnProperty(key)){if(gameData[key].slug===previousProps.match.params.slug){this.setState({gameInfo:gameData[key]});}}}}}},{key:\"render\",value:function render(){var chargeAtmMSG='';if(this.props.paymentReducer.chargeAtmSuccess.data!==undefined){chargeAtmMSG=this.props.paymentReducer.chargeAtmSuccess.data.messages;}var server=this.props.gamesReducer.detail;var serverElement=null;if(server.length>0){serverElement=server.map(function(val,index){return React.createElement(\"option\",{key:index,value:val.server_id},val.server_name);});}var _this$state3=this.state,errorsCard=_this$state3.errorsCard,errorsAtm=_this$state3.errorsAtm,errorSelectServer=_this$state3.errorSelectServer,gameInfo=_this$state3.gameInfo,userRole=_this$state3.userRole,errorSelectRole=_this$state3.errorSelectRole;var paymentReducer=this.props.paymentReducer;return React.createElement(\"div\",{className:\"container paytogame_container\"},React.createElement(\"div\",{className:\"row box\"},React.createElement(\"h2\",null,gameInfo.name),React.createElement(\"div\",{className:\"hd-Form\"},\" B\\u01B0\\u1EDBc 1: Ch\\u1ECDn th\\xF4ng tin nh\\xE2n v\\u1EADt (*)\"),React.createElement(\"label\",{htmlFor:\"sltServer\",className:\"col-sm-12 controll-label\",id:\"list_server\"},\" Ch\\u1ECDn server:\"),errorSelectServer&&React.createElement(\"span\",{className:\"input-error\"},errorSelectServer[0]),React.createElement(\"select\",{name:\"sltServer\",onBlur:this.validatePayCard,value:this.state.sltServer,onChange:this.hanleGetRole,className:\"form-control \",id:\"server_list\"},React.createElement(\"option\",{value:\"\"},\"Ch\\u1ECDn server\"),serverElement),Object.keys(userRole).length>0?React.createElement(\"div\",null,React.createElement(\"label\",{htmlFor:\"sltRoleId\",className:\"col-sm-12 controll-label\"},\" Ch\\u1ECDn nh\\xE2n v\\u1EADt:\"),React.createElement(\"select\",{name:\"sltRoleId\",onChange:this.handleChange,className:\"form-control \",id:\"userRole\"},userRole.data.role.map(function(val,index){return React.createElement(\"option\",{key:index,value:val.roleId},val.roleName);}))):'Không tìm thấy nhân vật',React.createElement(\"div\",{id:\"appentHtml\"}),React.createElement(\"div\",{className:\"clearfix\"}),\" \",React.createElement(\"input\",{type:\"hidden\",name:\"id_user\",id:\"id_user\"}),React.createElement(\"div\",{className:\"hd-Form\"},\" B\\u01B0\\u1EDBc 2: Ch\\u1ECDn ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n (*)\"),React.createElement(\"div\",{className:\"panel-group paytogame\",id:\"accordion\"},React.createElement(\"div\",{className:\"panel panel-default\"},React.createElement(\"div\",{className:\"panel-heading\"},React.createElement(\"h4\",{className:\"panel-title\"},React.createElement(\"a\",{\"data-toggle\":\"collapse\",\"data-parent\":\"#accordion\",href:\"#collapse1\"},\"N\\u1EA1p th\\u1EBB c\\xE0o\"))),React.createElement(\"div\",{id:\"collapse1\",className:\"panel-collapse collapse in\"},React.createElement(\"form\",{onSubmit:this.handlePayByCard},React.createElement(\"div\",{className:\"panel-body\"},React.createElement(\"label\",{htmlFor:\"sltCardType\",className:\"col-sm-12 controll-label\"},React.createElement(\"span\",null,\"Lo\\u1EA1i th\\u1EBB\"),errorsCard.sltCardType&&React.createElement(\"span\",{className:\"input-error\"},errorsCard.sltCardType[0]),React.createElement(\"select\",{onBlur:this.validatePayCard,name:\"sltCardType\",onChange:this.handleChange,className:\"form-control\"},React.createElement(\"option\",{value:\"\"},\"Ch\\u1ECDn lo\\u1EA1i th\\u1EBB\"),React.createElement(\"option\",{value:\"HPC\"},\"HPCode\"),React.createElement(\"option\",{value:\"GATE\"},\"GATE\"))),React.createElement(\"label\",{htmlFor:\"txtSerie\",className:\"col-sm-12 controll-label\"},React.createElement(\"span\",null,\"S\\u1ED1 serie\"),errorsCard.txtSerie&&React.createElement(\"span\",{className:\"input-error\"},errorsCard.txtSerie[0]),React.createElement(\"input\",{onBlur:this.validatePayCard,type:\"text\",name:\"txtSerie\",className:\"form-control\",onChange:this.handleChange})),React.createElement(\"label\",{htmlFor:\"txtCardPin\",className:\"col-sm-12 controll-label\"},React.createElement(\"span\",null,\"M\\xE3 th\\u1EBB\"),errorsCard.txtCardPin&&React.createElement(\"span\",{className:\"input-error\"},errorsCard.txtCardPin[0]),React.createElement(\"input\",{onBlur:this.validatePayCard,type:\"text\",name:\"txtCardPin\",className:\"form-control\",onChange:this.handleChange})),React.createElement(\"button\",{disabled:this.props.isLoadingReducer.isLoading,id:\"submitCard\",className:\"col-sm-3 btn btn-primary\"},this.props.isLoadingReducer.isLoading?React.createElement(\"div\",{className:'dot-loader'},React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null)):'thanh toán'),paymentReducer.chargeCard.status===1?React.createElement(\"span\",{className:\"message-success\"},paymentReducer.chargeCard.messages):React.createElement(\"span\",{className:\"message-alert\"},paymentReducer.chargeCard.messages))))),React.createElement(\"div\",{className:\"panel panel-default\"},React.createElement(\"div\",{className:\"panel-heading\"},React.createElement(\"h4\",{className:\"panel-title\"},React.createElement(\"a\",{\"data-toggle\":\"collapse\",\"data-parent\":\"#accordion\",href:\"#collapse2\"},\"N\\u1EA1p th\\u1EBB ATM/iBanking\"))),React.createElement(\"div\",{id:\"collapse2\",className:\"panel-collapse collapse\"},React.createElement(\"form\",{onSubmit:this.handlePayByATM},React.createElement(\"div\",{className:\"panel-body\"},React.createElement(\"label\",{htmlFor:\"sltAmount\",className:\"col-sm-12 controll-label\"},React.createElement(\"span\",null,\"S\\u1ED1 ti\\u1EC1n thanh to\\xE1n (VN\\u0110)\"),errorsAtm.sltAmount&&React.createElement(\"span\",{className:\"input-error\"},errorsAtm.sltAmount[0]),React.createElement(\"select\",{onBlur:this.validatePayAtm,name:\"sltAmount\",className:\"form-control\",onChange:this.handleChange},React.createElement(\"option\",{value:\"\"},\"Ch\\u1ECDn s\\u1ED1 ti\\u1EC1n\"),React.createElement(\"option\",{value:10000},\"10,000\"),React.createElement(\"option\",{value:20000},\"20,000\"),React.createElement(\"option\",{value:50000},\"50,000\"),React.createElement(\"option\",{value:100000},\"100,000\"),React.createElement(\"option\",{value:200000},\"200,000\"),React.createElement(\"option\",{value:300000},\"300,000\"),React.createElement(\"option\",{value:500000},\"500,000\"),React.createElement(\"option\",{value:1000000},\"1,000,000\"),React.createElement(\"option\",{value:2000000},\"2,000,000\"))),React.createElement(\"button\",{disabled:this.props.isLoadingReducer.isLoading,id:\"submitAtm\",className:\"col-sm-3 btn btn-primary\"},this.props.isLoadingReducer.isLoading?React.createElement(\"div\",{className:'dot-loader'},React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null),React.createElement(\"div\",null)):'thanh toán'))))),errorSelectRole.length>0?React.createElement(\"div\",{style:{marginTop:\"10px\"},className:\"alert alert-danger\",role:\"alert\"},errorSelectRole[0]):'',React.createElement(\"div\",{className:\"message-alert\"},\"N\\u1EA0P HPCODE = 100% ; GATE = 100% ; VCOIN = 90% ; ATM = 100% (Th\\u1EBB HPCode c\\xF3 b\\xE1n \\u1EDF c\\xE1c c\\u1EEDa h\\xE0ng c\\u1EE7a Payoo & b\\xE1n online t\\u1EA1i Website Napthegame.net )\")),React.createElement(\"div\",{className:\"clearfix\"}),React.createElement(\"div\",{className:\"modal modal-atm-report fade\",tabIndex:\"-1\",role:\"dialog\",\"data-backdrop\":\"false\"},React.createElement(\"div\",{className:\"modal-dialog\",role:\"document\"},React.createElement(\"div\",{className:\"modal-content\"},React.createElement(\"div\",{className:\"modal-body\"},React.createElement(\"p\",{className:\"text-center\"},chargeAtmMSG)))))));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps,prevState){var userRole=nextProps.paymentReducer.userRole.data;if(prevState.sltServer!==''&&userRole){return{userRole:nextProps.paymentReducer.userRole,sltRoleId:prevState.sltRoleId!==''?prevState.sltRoleId:userRole.role[0].roleId};}return{userRole:{},sltRoleId:''};}}]);return Paytogame;}(Component);var mapStateToProps=function mapStateToProps(state){return{gamesReducer:state.gamesReducer,paymentReducer:state.paymentReducer,isLoadingReducer:state.isLoadingReducer};};var mapDispatchToProps=function mapDispatchToProps(dispatch,props){return{getDetailGameToGame:function getDetailGameToGame(productId){dispatch(gameActions.getDetailGameToGameRequest(productId));},chargeCard:function chargeCard(params){dispatch(paymentActions.chargeCardRequest(params));},chargeAtm:function chargeAtm(params){dispatch(paymentActions.chargeAtmRequest(params));},getUserRole:function getUserRole(serverId,userId,agent){dispatch(paymentActions.getUserRoleRequest(serverId,userId,agent));},chargeAtmSuccess:function chargeAtmSuccess(paramStr){dispatch(paymentActions.chargeAtmSuccess(paramStr));}};};export default connect(mapStateToProps,mapDispatchToProps)(withRouter(Paytogame));","map":{"version":3,"sources":["C:/reactjs/payv2/pay-v2.phoeniz.com/src/components/Paytogame.js"],"names":["React","Component","connect","gameActions","paymentActions","Validate","withRouter","_","Paytogame","props","handlePayByCard","e","preventDefault","validatePayCard","chargeCard","state","handlePayByATM","validatePayAtm","chargeAtm","sltServer","sltCardType","txtSerie","txtCardPin","errorsCard","sltAmount","errorSelectServer","errorSelectRole","isValid","isRequired","push","minLength","maxLength","sltRoleId","setState","errorsAtm","hanleGetRole","event","target","serverId","value","getUserRole","JSON","parse","localStorage","getItem","data","id","gameInfo","agent","handleChange","type","checked","name","username","userRole","chargeSuccessMSG","match","getDetailGameToGame","params","queryString","require","strParams","location","search","has","chargeAtmSuccess","console","log","paymentReducer","messages","modalATMReport","window","$","modal","on","previousProps","previousState","Object","keys","length","gameData","gamesReducer","key","hasOwnProperty","slug","chargeAtmMSG","undefined","server","detail","serverElement","map","val","index","server_id","server_name","role","roleId","roleName","isLoadingReducer","isLoading","status","marginTop","nextProps","prevState","mapStateToProps","mapDispatchToProps","dispatch","productId","getDetailGameToGameRequest","chargeCardRequest","chargeAtmRequest","userId","getUserRoleRequest","paramStr"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport \"../assets/css/paytogame.css\"\r\nimport gameActions from \"../actions/games.actions\"\r\nimport paymentActions from \"../actions/payment.actions\"\r\nimport Validate from \"../utils/Validate\";\r\nimport { withRouter } from 'react-router-dom';\r\nimport * as _ from 'lodash';\r\n\r\nclass Paytogame extends Component {\r\n\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            username: JSON.parse(localStorage.getItem('user')).data.username,\r\n            userRole: {},\r\n            sltRoleId: '',\r\n            sltServer: '',\r\n            sltCardType: '',\r\n            txtSerie: '',\r\n            txtCardPin: '',\r\n            sltAmount: '',\r\n            gameInfo: {},\r\n            chargeSuccessMSG : '',\r\n            errorsAtm: [],\r\n            errorsCard: [],\r\n            errorSelectServer: [],\r\n            errorSelectRole: []\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        let {match} = this.props\r\n        this.props.getDetailGameToGame(match.params.id)\r\n        let queryString = require('query-string');\r\n        let strParams = this.props.location.search;\r\n        let params = queryString.parse(strParams);\r\n        if (_.has(params, 'trans_id')) {\r\n            this.props.chargeAtmSuccess(strParams)\r\n            console.log(this.props)\r\n            if(this.props.paymentReducer.chargeAtmSuccess.messages !== null)\r\n            {\r\n                let modalATMReport = window.$('.modal-atm-report');\r\n                modalATMReport.modal('show');\r\n                modalATMReport.on('click', function () {\r\n                    modalATMReport.modal('hide')\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    handlePayByCard = (e) =>{\r\n        e.preventDefault();\r\n        if(this.validatePayCard()){\r\n            this.props.chargeCard(this.state)\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(previousProps, previousState){\r\n        if(Object.keys(previousState.gameInfo).length === 0)\r\n        {\r\n            let gameData = previousProps.gamesReducer.data;\r\n            for (var key in gameData) {\r\n                if (gameData.hasOwnProperty(key)) {\r\n                    if(gameData[key].slug === previousProps.match.params.slug)\r\n                    {\r\n                        this.setState({\r\n                            gameInfo: gameData[key]\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    static getDerivedStateFromProps(nextProps, prevState){\r\n        let userRole = nextProps.paymentReducer.userRole.data\r\n        \r\n        if(prevState.sltServer !== '' && userRole)\r\n        {\r\n            return {\r\n                userRole: nextProps.paymentReducer.userRole,\r\n                sltRoleId: prevState.sltRoleId!==''?prevState.sltRoleId:userRole.role[0].roleId\r\n            }            \r\n        }\r\n        return {\r\n            userRole: {},\r\n            sltRoleId: ''\r\n        }\r\n    }\r\n\r\n    handlePayByATM = (e) => {\r\n        e.preventDefault();\r\n        if(this.validatePayAtm()){\r\n            this.props.chargeAtm(this.state);\r\n        }\r\n    }\r\n\r\n    validatePayCard = () => {\r\n        const { sltServer, sltCardType, txtSerie, txtCardPin } = this.state;\r\n        let errorsCard = {\r\n            sltServer: [],\r\n            sltCardType: [],\r\n            txtSerie: [],\r\n            txtCardPin: [],\r\n            sltAmount: []\r\n        };\r\n        let errorSelectServer = [];\r\n        let errorSelectRole = [];\r\n        let isValid = true;\r\n        if (Validate.isRequired( sltServer )) {\r\n            errorSelectServer.push('Vui lòng chọn server');\r\n            isValid = false;\r\n        }\r\n        if (Validate.isRequired( sltCardType )) {\r\n            errorsCard.sltCardType.push('Vui lòng chọn loại thẻ');\r\n            isValid = false;\r\n        }\r\n        if (Validate.isRequired( txtSerie )) {\r\n            errorsCard.txtSerie.push('Series bắt buộc nhập');\r\n            isValid = false;\r\n        }\r\n        if (Validate.minLength( txtSerie, 6 )) {\r\n            errorsCard.txtSerie.push('Series tối thiểu 6 ký tự');\r\n            isValid = false;\r\n        }\r\n        if (Validate.maxLength( txtSerie, 20 )) {\r\n            errorsCard.txtSerie.push('Series đa  20 ký tự');\r\n            isValid = false;\r\n        }\r\n        if (Validate.isRequired( txtCardPin )) {\r\n            errorsCard.txtCardPin.push('Mã thẻ bắt buộc nhập');\r\n            isValid = false;\r\n        }\r\n        if (Validate.minLength( txtCardPin, 6 )) {\r\n            errorsCard.txtCardPin.push('Mã thẻ tối thiểu 6 ký tự');\r\n            isValid = false;\r\n        }\r\n        if (Validate.maxLength( txtCardPin, 20 )) {\r\n            errorsCard.txtCardPin.push('Mã thẻ đa 20 ký tự');\r\n            isValid = false;\r\n        }\r\n        if(this.state.sltRoleId === ''){\r\n            errorSelectRole.push('không tìm thấy nhân vật')\r\n            isValid = false;\r\n        }\r\n        this.setState({\r\n            errorsCard: errorsCard,\r\n            errorSelectServer: errorSelectServer,\r\n            errorSelectRole: errorSelectRole\r\n        })\r\n        return isValid\r\n    }\r\n\r\n    validatePayAtm = () => {\r\n        const { sltServer, sltAmount } = this.state;\r\n        let errorsAtm = {\r\n            sltServer: [],\r\n            sltAmount: []\r\n        };\r\n        let errorSelectServer = [];\r\n        let errorSelectRole = [];\r\n        let isValid = true;\r\n        if (Validate.isRequired( sltServer )) {\r\n            errorSelectServer.push('Vui lòng chọn server');\r\n            isValid = false;\r\n        }\r\n        if (Validate.isRequired( sltAmount )) {\r\n            errorsAtm.sltAmount.push('Vui lòng chọn mệnh giá');\r\n            isValid = false;\r\n        }\r\n        if(this.state.sltRoleId === ''){\r\n            errorSelectRole.push('không tìm thấy nhân vật')\r\n            isValid = false;\r\n        }\r\n        this.setState({\r\n            errorsAtm: errorsAtm,\r\n            errorSelectServer: errorSelectServer,\r\n            errorSelectRole: errorSelectRole\r\n        })\r\n        \r\n        return isValid\r\n    }\r\n\r\n    hanleGetRole = (event) =>{\r\n        const target = event.target;\r\n        const serverId = target.value;\r\n        if(serverId !== '')\r\n        {\r\n            this.props.getUserRole(serverId, JSON.parse(localStorage.getItem('user')).data.id, this.state.gameInfo.agent);\r\n        }\r\n        this.setState({\r\n            sltServer: serverId\r\n        })\r\n    }\r\n\r\n    handleChange = (event) =>{\r\n        const target = event.target;\r\n        const value = target.type === 'checkbox' ? target.checked : target.value;\r\n        const name = target.name;\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    }\r\n\r\n    render() {\r\n        let chargeAtmMSG = '';\r\n        if(this.props.paymentReducer.chargeAtmSuccess.data !== undefined)\r\n        {\r\n            chargeAtmMSG = this.props.paymentReducer.chargeAtmSuccess.data.messages\r\n        }\r\n        let server = this.props.gamesReducer.detail;\r\n        let serverElement = null;\r\n        if(server.length > 0)\r\n        {\r\n            serverElement = server.map((val, index) => {\r\n                return <option key={index} value={val.server_id}>{val.server_name}</option>\r\n            })\r\n        }\r\n        let {errorsCard, errorsAtm, errorSelectServer, gameInfo, userRole, errorSelectRole} = this.state;\r\n        let {paymentReducer} = this.props;\r\n        return (\r\n            <div className=\"container paytogame_container\">\r\n                <div className=\"row box\">\r\n                    <h2>{gameInfo.name}</h2>\r\n                    <div className=\"hd-Form\"> Bước 1: Chọn thông tin nhân vật (*)</div>\r\n                    <label htmlFor=\"sltServer\" className=\"col-sm-12 controll-label\" id=\"list_server\"> Chọn server:</label>\r\n                    {errorSelectServer && (<span className=\"input-error\">{errorSelectServer[0]}</span>)}\r\n                    <select name=\"sltServer\" onBlur={this.validatePayCard} value={this.state.sltServer} onChange={this.hanleGetRole} className=\"form-control \" id=\"server_list\">\r\n                        <option value=\"\">Chọn server</option>\r\n                        {serverElement}\r\n                    </select>\r\n                    {\r\n                        Object.keys(userRole).length > 0 ?\r\n                        (<div>\r\n                            <label htmlFor=\"sltRoleId\" className=\"col-sm-12 controll-label\"> Chọn nhân vật:</label>\r\n                            <select name=\"sltRoleId\" onChange={this.handleChange} className=\"form-control \" id=\"userRole\">\r\n                            {userRole.data.role.map((val, index) => {\r\n                                return <option key={index} value={val.roleId}>{val.roleName}</option>\r\n                            })}\r\n                            </select>\r\n                        </div>)\r\n                        :'Không tìm thấy nhân vật'\r\n                    }\r\n                    <div id=\"appentHtml\" />\r\n                    <div className=\"clearfix\" /> <input type=\"hidden\" name=\"id_user\" id=\"id_user\" />\r\n                    <div className=\"hd-Form\"> Bước 2: Chọn phương thức thanh toán (*)</div>\r\n                    <div className=\"panel-group paytogame\" id=\"accordion\">\r\n                        <div className=\"panel panel-default\">\r\n                            <div className=\"panel-heading\">\r\n                                <h4 className=\"panel-title\">\r\n                                    <a data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapse1\">Nạp thẻ cào</a>\r\n                                </h4>\r\n                            </div>\r\n                            <div id=\"collapse1\" className=\"panel-collapse collapse in\">\r\n                                <form onSubmit={this.handlePayByCard}>\r\n                                    <div className=\"panel-body\">\r\n                                        <label htmlFor=\"sltCardType\" className=\"col-sm-12 controll-label\">\r\n                                            <span>Loại thẻ</span>\r\n                                            {errorsCard.sltCardType && (<span className=\"input-error\">{errorsCard.sltCardType[0]}</span>)}\r\n                                            <select onBlur={this.validatePayCard} name=\"sltCardType\" onChange={this.handleChange} className=\"form-control\">\r\n                                                <option value=\"\">Chọn loại thẻ</option>\r\n                                                <option value=\"HPC\">HPCode</option>\r\n                                                <option value=\"GATE\">GATE</option>\r\n                                            </select>\r\n                                        </label>\r\n                                        <label htmlFor=\"txtSerie\" className=\"col-sm-12 controll-label\">\r\n                                            <span>Số serie</span>\r\n                                            {errorsCard.txtSerie && (<span className=\"input-error\">{errorsCard.txtSerie[0]}</span>)}\r\n                                            <input onBlur={this.validatePayCard} type=\"text\" name=\"txtSerie\" className=\"form-control\" onChange={this.handleChange} />\r\n                                        </label>\r\n                                        <label htmlFor=\"txtCardPin\" className=\"col-sm-12 controll-label\">\r\n                                            <span>Mã thẻ</span>\r\n                                            {errorsCard.txtCardPin && (<span className=\"input-error\">{errorsCard.txtCardPin[0]}</span>)}\r\n                                            <input onBlur={this.validatePayCard} type=\"text\" name=\"txtCardPin\" className=\"form-control\" onChange={this.handleChange} />\r\n                                        </label>\r\n                                        <button disabled={this.props.isLoadingReducer.isLoading} id=\"submitCard\" className=\"col-sm-3 btn btn-primary\">{this.props.isLoadingReducer.isLoading?\r\n                                        <div className={'dot-loader'}>\r\n                                            <div></div>\r\n                                            <div></div>\r\n                                            <div></div>\r\n                                            <div></div>\r\n                                            <div></div>\r\n                                        </div>\r\n                                        :'thanh toán'}</button>\r\n                                        {\r\n                                        paymentReducer.chargeCard.status === 1 ?(<span className=\"message-success\">\r\n                                            {paymentReducer.chargeCard.messages}\r\n                                        </span>):(<span className=\"message-alert\">\r\n                                            {paymentReducer.chargeCard.messages}\r\n                                        </span>)\r\n                                        }\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"panel panel-default\">\r\n                            <div className=\"panel-heading\">\r\n                                <h4 className=\"panel-title\">\r\n                                    <a data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapse2\">Nạp thẻ ATM/iBanking</a>\r\n                                </h4>\r\n                            </div>\r\n                            <div id=\"collapse2\" className=\"panel-collapse collapse\">\r\n                                <form onSubmit={this.handlePayByATM}>\r\n                                    <div className=\"panel-body\">\r\n                                        <label htmlFor=\"sltAmount\" className=\"col-sm-12 controll-label\">\r\n                                            <span>Số tiền thanh toán (VNĐ)</span>\r\n                                            {errorsAtm.sltAmount && (<span className=\"input-error\">{errorsAtm.sltAmount[0]}</span>)}\r\n                                            <select onBlur={this.validatePayAtm} name=\"sltAmount\" className=\"form-control\" onChange={this.handleChange}>\r\n                                                <option value=\"\">Chọn số tiền</option>\r\n                                                <option value={10000}>10,000</option>\r\n                                                <option value={20000}>20,000</option>\r\n                                                <option value={50000}>50,000</option>\r\n                                                <option value={100000}>100,000</option>\r\n                                                <option value={200000}>200,000</option>\r\n                                                <option value={300000}>300,000</option>\r\n                                                <option value={500000}>500,000</option>\r\n                                                <option value={1000000}>1,000,000</option>\r\n                                                <option value={2000000}>2,000,000</option>\r\n                                            </select>\r\n                                        </label>\r\n                                        <button disabled={this.props.isLoadingReducer.isLoading} id=\"submitAtm\" className=\"col-sm-3 btn btn-primary\">{this.props.isLoadingReducer.isLoading?\r\n                                        <div className={'dot-loader'}>\r\n                                            <div></div>\r\n                                            <div></div>\r\n                                            <div></div>\r\n                                            <div></div>\r\n                                            <div></div>\r\n                                        </div>\r\n                                        :'thanh toán'}</button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                            \r\n                        </div>\r\n                        {\r\n                            errorSelectRole.length > 0?\r\n                            <div style={{marginTop: \"10px\"}} className=\"alert alert-danger\" role=\"alert\">\r\n                                {errorSelectRole[0]}\r\n                            </div>:''\r\n                        }\r\n                        \r\n                        <div className=\"message-alert\">\r\n                            NẠP HPCODE = 100% ; GATE = 100% ; VCOIN = 90% ; ATM = 100% (Thẻ HPCode có bán ở các cửa hàng của Payoo &amp; bán online tại Website Napthegame.net )\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"clearfix\" />\r\n                    <div className=\"modal modal-atm-report fade\" tabIndex=\"-1\" role=\"dialog\" data-backdrop=\"false\">\r\n                        <div className=\"modal-dialog\" role=\"document\">\r\n                            <div className=\"modal-content\">\r\n                                <div className=\"modal-body\">\r\n                                    <p className={\"text-center\"}>{chargeAtmMSG}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    gamesReducer: state.gamesReducer,\r\n    paymentReducer: state.paymentReducer,\r\n    isLoadingReducer: state.isLoadingReducer\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch, props) => {\r\n    return {\r\n        getDetailGameToGame: (productId) => {\r\n            dispatch(gameActions.getDetailGameToGameRequest(productId))\r\n        },\r\n        chargeCard: (params) => {\r\n            dispatch(paymentActions.chargeCardRequest(params))\r\n        },\r\n        chargeAtm: (params) => {\r\n            dispatch(paymentActions.chargeAtmRequest(params))\r\n        },\r\n        getUserRole: ( serverId, userId, agent) => {\r\n            dispatch(paymentActions.getUserRoleRequest(serverId, userId, agent))\r\n        },\r\n        chargeAtmSuccess: (paramStr) => {\r\n            dispatch(paymentActions.chargeAtmSuccess(paramStr))\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Paytogame))"]},"metadata":{},"sourceType":"module"}